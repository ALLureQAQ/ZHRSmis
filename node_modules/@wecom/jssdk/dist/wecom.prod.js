const e="undefined"!=typeof window?window:void 0,t="undefined"!=typeof document?document:void 0,n="undefined"!=typeof navigator?navigator:void 0,r="undefined"!=typeof location?location:void 0;function i(){return r?.href||""}function o(){return t?.title||""}const a=n?.userAgent||"",s=n?.platform||"",c=a?.match(/wxwork\/([\d.]+)/i)?.[1],u=!!c,f=!u&&/micromessenger/i.test(a),l=/\bAndroid\b/i.test(a),d=/Win/i.test(s),{isIOS:p,isMac:h}=function(){const e=n?.maxTouchPoints??1,t=/Mac/i.test(s);if(t&&e>2)return{isMac:!1,isIOS:!0};return{isMac:t,isIOS:/\b(iPhone|iPad|iPod)\b/i.test(a)}}();let g,m,w;function v(){return g}function y(){return m?.getResult()?.params}function C(){return w?.getResult()?.params}function b(){const e=v();if(u&&e?.getAgentConfigSignature){const e=C();return e?.corpid}const t=y();return t?.appId}function k(){const e=function(){const e=v();return u&&e?.getAgentConfigSignature?C():y()}();if(!e)return;const t=b();return{appId:t,verifyAppId:t,verifySignType:"sha1",verifyTimestamp:e.timestamp,verifyNonceStr:e.nonceStr,verifySignature:e.signature}}const S={config:"preVerifyJsApi",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareWechat:"menu:share:wechat",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress",getBrandWCPayRequest:"getBrandWCPayRequest"},I={};for(const ea of Object.keys(S))I[S[ea]]=ea;function x(e){return S[e]||e}function _(e){return I[e]||e}function A(e){return e.map(x)}const M=i();function T(e){if("undefined"!=typeof Buffer)return Buffer.from(e).toString("base64");let t="";const n=new Uint8Array(e),r=n.byteLength;for(let i=0;i<r;i++)t+=String.fromCharCode(n[i]);return btoa(t)}function W(e){if("undefined"!=typeof Buffer)return Buffer.from(e,"base64").buffer;const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function L(e,t,n){if(R(e))try{return e.call(n,t)}catch(r){!function(...e){console.error("[wwsdk]",...e)}(r)}}function P(e,t){return e.slice(0,t.length)===t}function D(e){return e?M.split("#")[0]:i().split("#")[0]}function O(e){return j(e)?e.slice(e.indexOf(":")+1):""}function B(e){return!1===e||0===e}function E(e){return!!e&&"object"==typeof e}function R(e){return"function"==typeof e}function j(e){return"string"==typeof e}function N(e){return e?j(e)?e:e.join(";"):e}let U=!!e?.WeixinJSBridge,V=Promise.resolve();async function q(t,n){U||await V,e.WeixinJSBridge.on(t,n)}async function $(t,n={},r){U||await V;const i=await new Promise(r=>{const i={...n,...k()};e.WeixinJSBridge.invoke(t,i,r)});i.errMsg||(i.errMsg=function(e,t){const n=_(e);if(!t)return`${n}:ok`;let r=O(t);"confirm"===r&&(r="ok");"failed"===r&&(r="fail");P(r,"failed_")&&(r=r.slice(7));P(r,"fail_")&&(r=r.slice(5));r=r.replace(/_/g,"").toLowerCase(),("access denied"===r||"no permission to execute"===r)&&(r="permission denied");"config"===n&&"function not exist"===r&&(r="ok");r||(r="fail");return`${n}:${r}`}(t,i.err_msg||i.errmsg));const o=O(i.errMsg);if(null==i.errCode&&(i.errCode=null!=i.err_code?i.err_code:"ok"===o?0:-1),L(r,i),"ok"!==o&&"yes"!==o)throw i;return i}U||(V=new Promise(e=>{t?.addEventListener("WeixinJSBridgeReady",()=>{U=!0,e()})}));class z extends Error{constructor(e){super(`SDK Error: ${e}`)}}class F extends z{constructor(){super("Aborted")}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class G{checkValid(){return u&&this.url!==D(this.useOriginalURL)&&(this.error=new F),!this.error}getResult(){if(this.checkValid())return this.result}async awaitPromise(e){try{return this.result=await e,this.result}catch(t){throw this.error=t,t}}constructor(e,t){J(this,"type",void 0),J(this,"url",void 0),J(this,"promise",void 0),J(this,"result",void 0),J(this,"error",void 0),J(this,"useOriginalURL",void 0),this.type=e,this.useOriginalURL=f&&!d&&!h&&1===e,this.url=D(this.useOriginalURL),this.promise=this.awaitPromise(t(this.url))}}async function Q(){const e=m;if(e?.checkValid())return e.promise;const t=new G(1,async e=>{const n=v();if(!n?.getConfigSignature)throw new z("Missing getConfigSignature");const r=await n.getConfigSignature(e);if(!t.checkValid())throw new F;const i=function(e,t){return{appId:e.corpId,timestamp:`${t.timestamp}`,nonceStr:t.nonceStr,signature:t.signature,jsApiList:A(e.jsApiList||["config"]),openTagList:A(e.openTagList||[])}}(n,r),o=await $("preVerifyJSAPI",{appId:i.appId,verifyJsApiList:i.jsApiList,verifyOpenTagList:i.openTagList,verifyAppId:i.appId,verifySignType:"sha1",verifyTimestamp:i.timestamp,verifyNonceStr:i.nonceStr,verifySignature:i.signature});if(!t.checkValid())throw new F;return{params:i,result:o}});return t.promise.then(e=>{const t=v();L(t?.onConfigSuccess,e.result),L(t?.onConfigComplete,e.result)},e=>{const t=v();L(t?.onConfigFail,e),L(t?.onConfigComplete,e)}),function(e){m=e}(t),t.promise}async function H(){const e=w;if(e?.checkValid())return e.promise;const t=new G(2,async e=>{let n;u&&function(e,t){const n=e?.split(".")||[],r=t?.split(".")||[];for(let i=0,o=Math.max(n.length,r.length);i<o;i++){const e=parseInt(n[i])||0,t=parseInt(r[i])||0;if(e>t)return 1;if(e<t)return-1}return 0}(c,"3.0.24")<0&&(n=Q());const[r]=await Promise.all([K(e),n]);if(!t.checkValid())throw new F;const i=await $("agentConfig",r);if(!t.checkValid())throw new F;return{params:r,result:i}});return t.promise.then(e=>Z(e.result),e=>X(e)),function(e){w=e}(t),t.promise}async function K(e){const t=v();if(!t?.getAgentConfigSignature)throw new z("Missing getAgentConfigSignature");const n=await t.getAgentConfigSignature(e);return{corpid:t.corpId,agentid:`${t.agentId}`,timestamp:`${n.timestamp}`,nonceStr:n.nonceStr,signature:n.signature,jsApiList:A(t.jsApiList||["agentConfig"])}}function Z(e){const t=v();L(t?.onAgentConfigSuccess,e),L(t?.onAgentConfigComplete,e)}function X(e){const t=v();L(t?.onAgentConfigFail,e),L(t?.onAgentConfigComplete,e)}function Y(){const e=v();return u&&e?.getAgentConfigSignature?H():Q()}function ee(){const e=v();if(e)return u&&e.getAgentConfigSignature?H():e.getConfigSignature?Q():void 0}function te(e){!function(e){if(!e.corpId)throw new Error("Missing corpId");g=e}(e),(f||u)&&ee()}async function ne(e,t,n=t){return ie(t,async()=>(await ee(),$(e,n)))}async function re(e,t,n){await ee(),q(e,()=>{ie(t,n)})}function ie(e,t){return t(e).then(t=>(L(e?.success,t),L(e?.complete,t),t),t=>{throw L("cancel"===O(t.errMsg)?e?.cancel:e?.fail,t),L(e?.complete,t),t})}var oe=function(e){return e.CLProximityUnknown="0",e.CLProximityImmediate="1",e.CLProximityNear="2",e.CLProximityFar="3",e}({});function ae(e={}){return ne("startMonitoringBeacons",e)}function se(e={}){return ne("stopMonitoringBeacons",e)}function ce(e){q("onBeaconsInRange",e)}function ue(e){return ne("createBLEConnection",e)}function fe(e){return ne("closeBLEConnection",e)}function le(e){q("onBLEConnectionStateChange",e)}function de(e){return ne("getBLEDeviceServices",e)}function pe(e){return ne("getBLEDeviceCharacteristics",e)}function he(e){return ne("readBLECharacteristicValue",e)}function ge(e){return ne("writeBLECharacteristicValue",e,{deviceId:e.deviceId,serviceId:e.serviceId,characteristicId:e.characteristicId,value:T(e.value)})}function me(e){return ne("notifyBLECharacteristicValueChange",e)}function we(e){q("onBLECharacteristicValueChange",t=>{"string"==typeof t?.value&&(t.value=W(t.value)),e(t)})}function ve(e={}){return ne("openBluetoothAdapter",e)}function ye(e={}){return ne("closeBluetoothAdapter",e)}function Ce(e={}){return ne("getBluetoothAdapterState",e)}function be(e){q("onBluetoothAdapterStateChange",e)}function ke(e={}){return ne("startBluetoothDevicesDiscovery",e)}function Se(e={}){return ne("stopBluetoothDevicesDiscovery",e)}function Ie(e={}){return ie(e,async()=>{await ee();const e=await $("getBluetoothDevices");for(const t of e.devices||[])Ae(t);return e})}function xe(e){q("onBluetoothDeviceFound",t=>{for(const e of t.devices||[])Ae(e);e(t)})}function _e(e){return ne("getConnectedBluetoothDevices",e)}function Ae(e){if("string"==typeof e.advertisData&&(e.advertisData=W(e.advertisData)),e.serviceDataV2){const t=e.serviceDataV2;for(const e of Object.keys(t))"string"==typeof t[e]&&(t[e]=W(t[e]));e.serviceData=t,delete e.serviceDataV2}}function Me(e){return ne("setClipboardData",e)}function Te(e={}){return ne("getClipboardData",e)}function We(e){return ne("startBeaconDiscovery",e)}function Le(e={}){return ne("stopBeaconDiscovery",e)}function Pe(e={}){return ne("getBeacons",e)}function De(e){q("onBeaconUpdate",e)}function Oe(e){q("onBeaconServiceChange",e)}var Be=function(e){return e.wgs84="wgs84",e.gcj02="gcj02",e}({});function Ee(e){return ne("openLocation",e,{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""})}function Re(e={}){return ie(e,async()=>{await ee();const t=await $("geoLocation",{type:e.type||"wgs84"});return delete t.type,t})}function je(e){return ne("startAutoLBS",e)}function Ne(e={}){return ne("stopAutoLBS",e)}function Ue(e){q("auto:location:report",e)}var Ve=function(e){return e.wifi="wifi",e.network2g="2g",e.network3g="3g",e.network4g="4g",e.none="none",e.unknown="unknown",e}({});function qe(e={}){return ne("getNetworkType",e)}function $e(e){q("onNetworkStatusChange",e)}function ze(e={}){return ne("startWifi",e)}function Fe(e={}){return ne("stopWifi",e)}function Je(e){return ne("connectWifi",e)}function Ge(e={}){return ne("getWifiList",e)}function Qe(e){q("onGetWifiList",e)}function He(e){q("onWifiConnected",e)}function Ke(e={}){return ne("getConnectedWifi",e)}function Ze(e){return ne("previewFile",e)}var Xe=function(e){return e.video="video",e.image="image",e.file="file",e.video_and_image="video_and_image",e}({}),Ye=function(e){return e.video="video",e.image="image",e.file="file",e}({});function et(e){return ne("chooseMessageFile",e)}function tt(e){return ne("getLocalFileData",e)}var nt=function(e){return e.original="original",e.compressed="compressed",e}({}),rt=function(e){return e.album="album",e.camera="camera",e}({}),it=function(e){return e.normal="normal",e.batch="batch",e.front="front",e.batch_front="batch_front",e}({});function ot(e={}){return ie(e,async()=>{await ee();const t=await $("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"],defaultCameraMode:e.defaultCameraMode||"normal",isSaveToAlbum:B(e.isSaveToAlbum)?0:1});if(l&&t.localIds){t.localIds=t.localIds||"[]";try{t.localIds=JSON.parse(t.localIds)}catch(n){}}return t})}function at(e){return ne("imagePreview",e)}function st(e){return ne("uploadImage",e,{localId:e.localId,isShowProgressTips:B(e.isShowProgressTips)?0:1})}function ct(e){return ne("downloadImage",e,{serverId:e.serverId,isShowProgressTips:B(e.isShowProgressTips)?0:1})}function ut(e){return ne("getLocalImgData",e)}function ft(e={}){return ne("startRecord",e)}function lt(e={}){return ne("stopRecord",e)}function dt(e){q("onVoiceRecordEnd",e)}function pt(e){return ne("playVoice",e)}function ht(e){return ne("pauseVoice",e)}function gt(e){return ne("stopVoice",e)}function mt(e){q("onVoicePlayEnd",e)}function wt(e){return ne("uploadVoice",e,{localId:e.localId,isShowProgressTips:B(e.isShowProgressTips)?0:1})}function vt(e){return ne("downloadVoice",e,{serverId:e.serverId,isShowProgressTips:B(e.isShowProgressTips)?0:1})}function yt(e){return ne("translateVoice",e,{localId:e.localId,isShowProgressTips:B(e.isShowProgressTips)?0:1})}var Ct=function(e){return e[e.common=0]="common",e[e.corp_training=1]="corp_training",e[e.edu_normal_class=2]="edu_normal_class",e[e.edu_small_class=3]="edu_small_class",e}({});function bt(e={}){return ne("startLiving",e)}function kt(e){return ne("replayLiving",e)}function St(e){return ne("downloadLivingReplay",e)}function It(e={}){return ne("startMeeting",e)}function xt(e){return ne("createDoc",e)}var _t=function(e){return e[e.other=0]="other",e[e.doc=3]="doc",e[e.sheet=4]="sheet",e[e.form=5]="form",e[e.slide=6]="slide",e[e.mindmap=7]="mindmap",e[e.flowchart=8]="flowchart",e[e.smartsheet=10]="smartsheet",e}({});function At(e){return ne("wedocSelectDoc",e)}function Mt(e={}){return ne("wedriveSelectDir",e)}function Tt(e){return ne("wedriveSelectFile",e)}function Wt(e){return ne("wedriveSelectFileForShare",e)}function Lt(e){return ne("wedriveSelectFileForDownload",e)}function Pt(e){q("historyBack",e)}function Dt(e={}){return ne("hideOptionMenu",e)}function Ot(e={}){return ne("showOptionMenu",e)}function Bt(e={}){return ne("closeWindow",e)}function Et(e){return ne("hideMenuItems",e)}function Rt(e){return ne("showMenuItems",e)}function jt(e={}){return ne("hideAllNonBaseMenuItem",e)}function Nt(e={}){return ne("showAllNonBaseMenuItem",e)}function Ut(e){return ne("openDefaultBrowser",e)}function Vt(e){q("onUserCaptureScreen",e)}function qt(e){re("menu:share:appmessage",e,()=>$("sendAppMessage",{title:e.title||o(),desc:e.desc||"",link:e.link||i(),img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||"",finder_feed:e.finderFeed||e.finder_feed,finder_topic:e.finderTopic||e.finder_topic,finder_profile:e.finderProfile||e.finder_profile,enableIdTrans:e.enableIdTrans?1:0}))}function $t(e){re("menu:share:timeline",e,()=>$("shareTimeline",{title:e.title||o(),desc:e.title||o(),img_url:e.imgUrl||"",link:e.link||i(),type:e.type||"link",data_url:e.dataUrl||"",enableIdTrans:e.enableIdTrans?1:0}))}function zt(e){re("menu:share:wechat",e,()=>$("shareWechat",{title:e.title||o(),desc:e.desc||"",link:e.link||i(),img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||"",enableIdTrans:e.enableIdTrans?1:0}))}function Ft(e){re("menu:share:qq",e,()=>$("shareQQ",{title:e.title||o(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||i()}))}function Jt(e){re("menu:share:weiboApp",e,()=>$("shareWeiboApp",{title:e.title||o(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||i()}))}function Gt(e){re("menu:share:QZone",e,()=>$("shareQZone",{title:e.title||o(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||i()}))}function Qt(e){return ne("shareAppMessage",e)}function Ht(e){return ne("shareWechatMessage",e)}function Kt(e={}){return ne("updateTimelineShareData",e)}function Zt(e={}){return ne("updateAppMessageShareData",e)}function Xt(e){return ie(e,async()=>{await ee();const t=await $("batchAddCard",{card_list:e.cardList.map(e=>({card_id:e.cardId,card_ext:e.cardExt}))});if(!t.card_list)return t;for(const e of t.card_list)e.cardId=e.card_id,delete e.card_id,e.cardExt=e.card_ext,delete e.card_ext,e.isSuccess=!!e.is_succ,delete e.is_succ;return t.cardList=t.card_list,delete t.card_list,t})}function Yt(e){return ie(e,async()=>{await ee();const t=await $("chooseCard",{app_id:b(),location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:`${e.timestamp}`,nonce_str:e.nonceStr});return t.cardList=t.choose_card_info,delete t.choose_card_info,t})}function en(e){return ne("batchViewCard",e,{card_list:e.cardList.map(e=>({card_id:e.cardId,code:e.code}))})}function tn(e){return ne("consumedShareCard",e,{consumedCardId:e.cardId,consumedCode:e.code})}var nn=function(e){return e[e.normal=0]="normal",e[e.scan=1]="scan",e}({});function rn(e){return ne("openProductViewWithPid",e,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo})}function on(e){return ne("getBrandWCPayRequest",e,sn(e))}function an(e){return ne("getRecevieBizHongBaoRequest",e,sn(e))}function sn(e){return{timeStamp:`${e.timestamp}`,nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function cn(e){return ne("addDevice",e)}async function un(e){return ie(e,async()=>{await ee();const t=await $("checkJsApi",{jsApiList:A(e.jsApiList)});if("string"==typeof t.checkResult)try{t.checkResult=JSON.parse(t.checkResult)}catch(n){t.checkResult={}}return t.checkResult=function(e){const t={...e};for(const n of Object.keys(e))t[_(n)]=e[n];return t}(fn(t.checkResult)),t})}function fn(e){const t={};for(const n of Object.keys(e)){if(!E(e[n])){t[n]=e[n];continue}const r=fn(e[n]);for(const e of Object.keys(r))t[`${n}.${e}`]=r[e]}return t}function ln(e){return ne("checkSchedule",e)}function dn(e){return ne("chooseInvoice",e)}function pn(e={}){return ne("claimClassAdmin",e)}function hn(e){return ne("createChatWithMsg",e)}function gn(e){return ne("createCorpGroupChat",e,{groupName:e.groupName||"",userIds:e.userIds,openUserIds:e.openUserIds,externalUserIds:e.externalUserIds,corpGroupUserIds:e.corpGroupUserIds})}var mn=function(e){return e[e.chat=0]="chat",e[e.qrcode=1]="qrcode",e}({});function wn(e={}){return ne("createExternalPayment",e)}function vn(e){return ne("createSchoolPayment",e)}function yn(e){return ne("discoverDevice",e)}function Cn(e){return ne("enterHWOpenTalk",e)}function bn(e={}){return ne("enterpriseVerify",e)}function kn(e){return ie(e,async()=>{await ee();const t=await $("getApprovalSelectedItems",{key:e.key});if(!t.selectedData)return t;try{t.selectedData=JSON.parse(t.selectedData)}catch(n){t.selectedData=[]}return t})}var Sn=function(e){return e.contact_profile="contact_profile",e.single_chat_tools="single_chat_tools",e.group_chat_tools="group_chat_tools",e.chat_attachment="chat_attachment",e.single_kf_tools="single_kf_tools",e.chain_single_chat_tools="chain_single_chat_tools",e.chain_group_chat_tools="chain_group_chat_tools",e.internal_group_chat_board="internal_group_chat_board",e.normal="normal",e}({});function In(e={}){return ne("getContext",e)}function xn(e={}){return ne("getCurCorpGroupChat",e)}function _n(e){return ne("getCurCorpGroupContact",e)}function An(e={}){return ne("getCurExternalChat",e)}function Mn(e={}){return ne("getCurExternalContact",e)}function Tn(e){return ne("getShareInfo",e)}function Wn(e){return ne("hideChatAttachmentMenu",e)}function Ln(e){return ne("launchMiniprogram",e,{appid:e.appid,path:Pn(e.path),envVersion:e.envVersion})}function Pn(e){if(!e||!j(e))return;const[t,...n]=e.split("?");return n.length?`${t}.html?${n.join("?")}`:`${t}.html`}function Dn(e={}){return ne("navigateToAddCustomer",e)}function On(e){return ne("navigateToKfChat",e)}function Bn(e={}){return ie(e,async()=>{await ee();const e=await $("editAddress");return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e})}function En(e={}){return ne("openAppComment",e)}function Rn(e={}){return ne("openAppDeviceDataAuth",e)}var jn=function(e){return e.permission="permission",e.datazone_permission="datazone_permission",e}({});function Nn(e={}){return ne("openAppManage",e)}function Un(e){return ne("openAppPurchase",e)}var Vn=function(e){return e.release="release",e.trial="trial",e.develop="develop",e}({});function qn(e){return ie(e,async()=>{await ee();const t=await $("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion});if(!l||!t.extraData)return t;try{t.extraData=JSON.parse(t.extraData)}catch(n){t.extraData={}}return t})}function $n(e){return ne("openDeviceProfile",e)}function zn(e={}){return ne("openEnterpriseChat",e,{chatId:e.chatId||"",chatname:e.groupName||"",groupName:e.groupName||"",useridlist:N(e.userIds),userIds:N(e.userIds),openIds:N(e.openIds),externalUserIds:N(e.externalUserIds)})}function Fn(e){return ne("openExistedChatWithMsg",e)}function Jn(e={}){return ne("openThirdAppServiceChat",e)}var Gn=function(e){return e[e.internal=1]="internal",e[e.external=2]="external",e}({});function Qn(e){return ne("openUserProfile",e)}var Hn=function(e){return e[e.mediaid=1]="mediaid",e[e.url=2]="url",e[e.localId=4]="localId",e}({});function Kn(e){return ne("printFile",e)}var Zn=function(e){return e.None="None",e.HWOpenTalk="HWOpenTalk",e.VoIP="VoIP",e.SystemCall="SystemCall",e}({});function Xn(e={}){return ne("queryCurrHWOpenTalk",e)}function Yn(e){return ne("refundExternalPayment",e)}function er(e){return ne("saveApprovalSelectedItems",e,{key:e.key,selectedData:"string"==typeof e.selectedData?e.selectedData:JSON.stringify(e.selectedData)})}var tr=function(e){return e.qrCode="qrCode",e.barCode="barCode",e}({});function nr(e={}){return ie(e,async()=>{await ee();const t=await $("scanQRCode",{needResult:e.needResult?1:0,scanType:e.scanType||["qrCode","barCode"]});if(!p)return t;const n=t.resultStr;if(!n)return t;let r;try{r=JSON.parse(n)}catch(i){}return t.resultStr=r?.scan_code?.scan_result,t})}var rr=function(e){return e.single="single",e.multi="multi",e}({}),ir=function(e){return e.department="department",e.user="user",e}({});function or(e){return ie(e,async()=>{await ee();const t=await $("selectCorpGroupContact",e);if(!j(t.result))return t;try{t.result=JSON.parse(t.result)}catch(n){}return t})}var ar=function(e){return e.single="single",e.multi="multi",e}({}),sr=function(e){return e.department="department",e.user="user",e}({});function cr(e){return ie(e,async()=>{await ee();const t=await $("selectEnterpriseContact",e);if(!j(t.result))return t;try{t.result=JSON.parse(t.result)}catch(n){}return t})}function ur(e={}){return ne("selectExternalChat",e)}var fr=function(e){return e[e.all=0]="all",e[e.unselected=1]="unselected",e}({});function lr(e={}){return ne("selectExternalContact",e)}var dr=function(e){return e.single="single",e.multi="multi",e}({});function pr(e){return ne("selectPrivilegedContact",e)}function hr(e){return ne("sendChatMessage",e)}function gr(e={}){return ne("setShareAttr",e)}function mr(e){return ne("shareToExternalChat",e)}function wr(e){return ne("shareToExternalContact",e)}function vr(e){return ne("shareToExternalMoments",e)}function yr(e={}){return ne("startWecast",e)}var Cr=function(e){return e.create_approval="10001",e.view_approval="10002",e}({}),br=function(e){return e.link="link",e.text="text",e}({});function kr(e){return ne("thirdPartyOpenPage",e)}function Sr(e){return ne("updateCorpGroupChat",e)}function Ir(e){return ne("updateEnterpriseChat",e,{chatId:e.chatId,userIdsToAdd:N(e.userIdsToAdd)})}function xr(e){return ne("updateMomentsSetting",e)}function _r(e){return ne("setKeepScreenOn",e)}function Ar(t={}){return ie(t,async()=>{if(!u)return async function(){if(!e?.WWOpenData?.agentConfig)throw new z("Missing WWOpenData.agentConfig");const t=await K(D()),n=new Promise((n,r)=>{e.WWOpenData.agentConfig({...t,success:n,fail:r})});return n.then(Z,X),n}();const{result:t}=await H();if(!d&&!e?.WeixinSandBox)throw new z("Missing WeixinSandBox");if(e?.WWOpenData||await $("wwapp.initWwOpenData"),!e?.WWOpenData)throw new z("Init WWOpenData failed");return e.WWOpenData.initJSSDK&&e.WWOpenData.initJSSDK({invoke:$,ensureAgentConfigReady:H}),t})}function Mr(e){const t=document.createElement("iframe"),{style:n}=t;n.display="block",n.border="none",n.background="transparent",t.referrerPolicy="origin",t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true");const r=function(e){if("string"==typeof e)return document.querySelector(e);return e}(e);return r&&r.appendChild(t),t}const Tr=Dr();let Wr,Lr=0;function Pr(){return`${Tr}-${Lr++}`}function Dr(){return Math.random().toString(36).slice(2)}function Or(e){return e&&"object"==typeof e?{...e,message:e.message,stack:e.stack}:e}function Br(e){try{return"string"==typeof e?JSON.parse(e):e}catch(t){}}function Er(e,t,n){const r=[];let i=!1,o=!1;function a(n){if(n.origin!==t||e.contentWindow!==n.source)return;const r=Br(n.data);"string"==typeof r?.type&&r.type.startsWith("ww-iframe-handle:")&&l(r,n)}window.addEventListener("message",a);const s=new MessageChannel;s.port1.onmessage=e=>{l(Br(e.data),e)};const{invoke:c,handleCallMessage:u,handleResponseMessage:f}=function(e,t){const n=new Map;return{invoke:function(t,r){return r?.dropResult?(e({type:"ww-iframe-handle:call",args:t},r),Promise.resolve(void 0)):new Promise((i,o)=>{const a=Pr();n.set(a,{resolve:i,reject:o}),e({type:"ww-iframe-handle:call",uid:a,args:t},r)})},handleCallMessage:async function(n,r){if(!n.uid)return t(n.args,r);try{e({type:"ww-iframe-handle:response",uid:n.uid,kind:"resolve",args:await t(n.args,r)})}catch(i){throw e({type:"ww-iframe-handle:response",uid:n.uid,kind:"reject",args:Or(i)}),i}},handleResponseMessage:function(e){const t=n.get(e.uid);t&&(t[e.kind](e.args),n.delete(e.uid))}}}(function(e,t){i?d(e,t):r.push({msg:e,opts:t})},n);function l(e,t){switch(e.type){case"ww-iframe-handle:ready":return function(e){if(i)return;i=!0,e.supportChannel&&(d({type:"ww-iframe-handle:set-port",port:s.port2},{transfer:[s.port2],serialize:!1}),o=!0);for(const t of r)d(t.msg,t.opts)}(e);case"ww-iframe-handle:call":return u(e,t);case"ww-iframe-handle:response":return void f(e)}}function d(n,r){const i=!1===r?.serialize?n:JSON.stringify(n);o?s.port1.postMessage(i,r?.transfer):e.contentWindow?.postMessage(i,t,r?.transfer)}return e.addEventListener("load",()=>{i||d({type:"ww-iframe-handle:init"})}),{el:e,invoke:c,dispose:function(){window.removeEventListener("message",a),s.port1.onmessage=null}}}function Rr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jr(e,t,n){L(t[e.name],e.payload||e.data,n)}function Nr(){const e=new Map;return{subscribe:function(t,n){e.set(t,n)},handleMessage:function(t){return e.get(t.type)?.(t)}}}function Ur(e,t){Wr?.();const n=Mr(document.body),{style:r}=n;r.position="fixed",r.left="0",r.top="0",r.zIndex="1000",r.width="100vw",r.height="100vh",n.classList.add("wecom-jssdk-modal"),n.setAttribute("src",e);const{origin:i}=new URL(e),o=Er(n,i,e=>("close"===e.type&&a(),t?.(e)));function a(){o.dispose(),n.parentNode?.removeChild(n)}return Wr=a,o}function Vr(e,t){const n=Mr(t.el),{style:r}=n;r.width="100%",r.height="100%";const i=new Map,{subscribe:o,handleMessage:a}=Nr(),{dispose:s}=Er(n,"https://login.work.weixin.qq.com",a);return o("call",e=>{jr(e,t)}),o("getStaticOptions",()=>({name:e,options:{...t,el:void 0,params:void 0}})),o("jsapiCallback",e=>{if(!i.has(e.seq))return;const t=i.get(e.seq);i.delete(e.seq),L("success"===e.kind?t?.success:t?.fail,e.payload),L(t?.complete,e.payload)}),o("getJSAPIParams",async n=>{const r=R(t.params)?await t.params():t.params,o=D();return i.set(n.seq,r),{webToken:t.webToken,url:o,configParams:n.payload?.skipSignature?void 0:await $r(o,n.payload?.preferSignatureTypeList||["agentConfig"]),jsapi:e,jsapiParams:r}}),o("openModalFrame",e=>{Ur(e.payload.url)}),n.style.opacity="0",n.src="https://login.work.weixin.qq.com/wwopen/ww-jsapi-transparent-frame",{el:n,unmount(){s(),n.parentNode?.removeChild(n)}}}const qr={agentConfig:K,suiteConfig:async function(e){const t=v();if(!t?.getSuiteConfigSignature)throw new z("Missing getSuiteConfigSignature");const n=await t.getSuiteConfigSignature(e);return{suiteid:t.suiteId,timestamp:`${n.timestamp}`,nonceStr:n.nonceStr,signature:n.signature,jsApiList:A(t.jsApiList||["agentConfig"])}}};async function $r(e,t){let n=new Error("Missing signature handler");for(const i of t)try{if(!Rr(qr,i))continue;return{type:i,params:await qr[i](e)}}catch(r){n=r}throw n}function zr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fr(e){return"object"==typeof e&&null!==e}function Jr(e,t){return!!e&&e.indexOf(t)>=0}var Gr=Hr("Identifier","name"),Qr=Hr("Literal","value");function Hr(e,t){return function(n){var r;return(r={type:e})[t]=n,r}}function Kr(e){return ei(e,65,90)||ei(e,97,122)||36===e||95===e}function Zr(e){return Kr(e)||Xr(e)}function Xr(e){return ei(e,48,57)}function Yr(e){return Xr(e)||ei(e,65,70)||ei(e,97,102)}function ei(e,t,n){return e>=t&&e<=n}for(var ti={null:null,true:!0,false:!1,NaN:NaN,Infinity:1/0},ni="await break case catch class const continue debugger default delete do else enum export extends false finally for function if import in instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),ri={},ii=0,oi=ni;ii<oi.length;ii++){ri[oi[ii]]=!0}function ai(e){Kr(e.peek())||e.unexpected();var t=e.index;do{e.next()}while(Zr(e.peek()));return e.expr.slice(t,e.index)}var si={n:"\n",r:"\r",t:"\t"};function ci(e){var t=e.peek();return Xr(t)||46===t?function(e){for(var t="";Xr(e.peek());)t+=e.nextCh();if("0"===t){if(e.eat(120)||e.eat(88)){for(t="";Yr(e.peek());)t+=e.nextCh();return t||e.unexpected(),e.build(Qr(parseInt(t,16)))}if(e.eat(98)||e.eat(66)){for(t="";48===e.peek()||49===e.peek();)t+=e.nextCh();return t||e.unexpected(),e.build(Qr(parseInt(t,2)))}}if(46===e.peek())for(t+=e.nextCh();Xr(e.peek());)t+=e.nextCh();if(101===e.peek()||69===e.peek()){t+=e.nextCh(),43!==e.peek()&&45!==e.peek()||(t+=e.nextCh());for(var n=!1;Xr(e.peek());)n=!0,t+=e.nextCh();n||e.unexpected()}return Kr(e.peek())&&e.throw("Variable name cannot start with a number (".concat(t).concat(e.peekCh(),").")),46!==e.peek()&&"."!==t||e.unexpected(),e.build(Qr(parseFloat(t)))}(e):39===t||34===t?function(e){for(var t,n=e.nextCh(),r="";t=e.nextCh();){if(t===n)return e.build(Qr(r));"\\"===t?(t=e.nextCh(),zr(si,t)?r+=si[t]:r+=t):r+=t}e.unexpected()}(e):Kr(t)?function(e){var t=ai(e);return zr(ti,t)?e.build(Qr(ti[t])):(zr(ri,t)&&e.unexpected(t),e.build(Gr(t)))}(e):void e.unexpected()}function ui(e,t,n){var r;return void 0===n&&(n=!1),n?(e.expect(91),r=fi(e),e.expect(93)):r=function(e){var t=ai(e);return e.build(Gr(t))}(e),e.build({type:"MemberExpression",object:t,property:r,computed:n})}function fi(e){return function(e){for(var t,n=ci(e);t=e.peek();)if(91!==t){if(!e.eat(46))break;n=ui(e,n)}else n=ui(e,n,!0);return n}(e)}function li(e){var t,n={expr:t=e.trim(),index:0,peek:function(){return this.expr.charCodeAt(this.index)},peekCh:function(){return this.expr.charAt(this.index)},next:function(){this.index+=1},nextCh:function(){return this.index+=1,this.expr.charAt(this.index-1)},eat:function(e){return this.peek()===e&&(this.next(),this.skipWhitespace(),!0)},expect:function(e){this.eat(e)||this.unexpected()},skip:function(e){this.index+=e,this.skipWhitespace()},skipWhitespace:function(){for(var e=t.charCodeAt(this.index);32===e||9===e||13===e||10===e;)this.index+=1,e=t.charCodeAt(this.index);return this.index},build:function(e){return this.skipWhitespace(),e},unexpected:function(e){if(!e&&this.index>=t.length)throw this.throw("Unexpected end of input.");throw this.throw("Unexpected token '".concat(e||this.peekCh(),"'."))},throw:function(e){throw new SyntaxError("".concat(e," (1:").concat(this.index,")"))}},r=fi(n);return n.index!==n.expr.length&&n.unexpected(),r}var di=["constrcutor","prototype","__proto__"];function pi(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),"Identifier"===e.type)return n.unshift(e.name),n;if("MemberExpression"===e.type){var r=e.object,i=e.property;if(e.computed){if("Literal"!==i.type)return;var o=i.value;if(Jr(t,o))return;n.unshift(o)}else{if("Identifier"!==i.type)return;var a=i.name;if(Jr(t,a))return;n.unshift(a)}return pi(r,t,n)}}function hi(e,t,n,r){for(var i=e,o=0,a=t.length-1;o<a;o++){var s=t[o];zr(i,s)&&Fr(i[s])||r(i,s,"string"==typeof t[o+1]?{}:[]),i=i[s]}return r(i,t[t.length-1],n),i}function gi(e,t,n){e[t]=n}function mi(e){if(Array.isArray(e))return e.map(mi);if(null==e||"object"!=typeof e)return e;const t={};for(const n of Object.keys(e))t[n]=mi(e[n]);return t}const wi=new WeakMap;function vi(e){return Object.keys(e).filter(t=>"function"==typeof e[t])}function yi(e){return Object.entries(e).reduce((e,[t,n])=>("function"!=typeof n&&(e[t]=n),e),{})}const Ci="https://open.work.weixin.qq.com",bi=`${Ci}/wwopen/ww-open-data-frame`,ki=["constructor","prototype","__proto__","__ob__"];function Si(t){const n=u?Ar():void 0;let r=i();async function i(){if(u)try{return await n,function(t){return new Promise((n,r)=>{e.WWOpenData.createOpenSessionInjector(t,(e,t)=>{e||!t?r(e||new Error("System error")):n(t)})})}({url:bi})}catch(r){throw L(t?.onError,r),L(t?.handleError,r),r}}async function o(e){if(!u)return;const t=await r;t&&t(e)}return{createOpenDataFrame:function(t){if(!t.template)throw new Error("options.template is required");const a=Mr(t.el),s=n?.then(()=>e?.WWOpenData?.registerOpenFrame(a)),{subscribe:c,handleMessage:f}=Nr(),{invoke:l,dispose:d}=Er(a,Ci,f),p={el:a,data:mi(t.data)||{},setData:async function(e){(function(e,t,n){void 0===n&&(n={});for(var r=n.protectedKeys||di,i=n.set||gi,o=0,a=Object.keys(t);o<a.length;o++){var s=a[o];if(!Jr(r,s))if(Jr(s,"[")||Jr(s,"."))try{var c=pi(li(s),r||[]);c?hi(e,c,t[s],i):i(e,s,t[s])}catch(u){i(e,s,t[s])}else i(e,s,t[s])}})(p.data,e,{protectedKeys:ki}),await l({type:"update",options:{data:e}})},dispose:function(){d(),s?.then(t=>{e?.WWOpenData?.unregisterOpenFrame(t)})},...t.methods};return wi.set(p,{frame:p,invoke:l,subscribe:c}),a.src=bi,c("init",async()=>({id:u?await s:void 0,hooks:vi(t),options:yi({...t,el:void 0,methods:void 0,data:p.data}),config:{support:["injectSession"]}})),c("call",e=>{let n=t;return"method"===e.kind&&(n=n.methods),jr(e,n,p)}),c("injectSession",async()=>{await o(a)}),c("refreshSession",async()=>{r=i(),await o(a)}),c("invokeJsapi",e=>$("wwapp.invokeJsApiByCallInfo",{callInfo:e.callInfo})),c("invokeDownload",e=>{if(!e.url.startsWith("https://open.work.weixin.qq.com/"))throw new Error("Invalid download url");const t=document.createElement("a");t.href=e.url,t.target="_blank",t.style.display="none",t.click()}),c("agentConfig",async()=>{const e=D();return{url:e,params:await K(e)}}),c("modal",async e=>{const n=u?"wecom-window":void 0;if("function"!=typeof t.handleModal)return{modalType:n};return{modalType:!1===t.handleModal({modalUrl:e.modalUrl,modalSize:e.modalSize})?"iframe":n}}),p}}}function Ii(e){const t=new URL("https://open.work.weixin.qq.com/wwopen/secureGateway/confirm");if(t.searchParams.set("confirm_id",e.confirmId),p||l)return void(location.href=t.href);t.searchParams.set("modal","true");const n=Ur(t.href,t=>{switch(t.type){case"call":return jr(t,e);case"close":return;default:throw new Error(`Unknown message type '${t.type}'`)}});return{el:n.el,unmount(){n.dispose(),n.el.parentNode?.removeChild(n.el)}}}const xi="2.3.3";var _i=function(e){return e.serviceApp="ServiceApp",e.corpApp="CorpApp",e}({}),Ai=function(e){return e.zh="zh",e.en="en",e}({}),Mi=function(e){return e.top="top",e.callback="callback",e.self="self",e}({}),Ti=function(e){return e.middle="middle",e.small="small",e}({}),Wi=function(e){return e.Light="light",e.Dark="dark",e.Auto="auto",e}({});const Li={[Ti.middle]:["480px","416px"],[Ti.small]:["320px","380px"]};function Pi(e){const{width:t,height:n}=function(e=Ti.middle){const t=Li[e]||Li[Ti.middle];return{width:t[0],height:t[1]}}(e.params?.panel_size),r=Mr(e.el);if(r.setAttribute("allow","local-network-access"),e.params?.redirect_type===Mi.top){(function(){let e;try{e=Di(window.top?.origin??"")}catch(t){e=Di(document.referrer)}return e})()!==Di(e.params?.redirect_uri)&&r.setAttribute("sandbox","allow-top-navigation allow-scripts allow-same-origin")}const{style:i}=r;i.width=t,i.height=n;const{dispose:o}=Er(r,"https://login.work.weixin.qq.com",t=>{if("call"===t.type)return jr(t,e);throw new Error(`Unknown message type '${t.type}'`)}),a=new URL("https://login.work.weixin.qq.com/wwlogin/sso/login");for(const s of Object.keys(e.params||{}))a.searchParams.set(s,e.params[s]);return a.searchParams.set("version",xi),r.src=a.href,{el:r,unmount(){o(),r.parentNode?.removeChild(r)}}}function Di(e=""){try{return new URL(e)?.origin}catch(t){return""}}function Oi(e){const t=new WeakMap;return(n,...r)=>(t.has(n)||t.set(n,e(n,...r)),t.get(n))}function Bi(e){return Oi(t=>{const n=function(e){return wi.get(e)}(t);if(!n)throw new TypeError("Illegal invocation");return e(n)})}const Ei=Bi(({frame:e,invoke:t,subscribe:n})=>{const r=new Map,i=new Map;return n("ref.event",e=>{const t=i.get(e.refId);if(t)for(const n of t)n(e.data)}),n("refDispose",e=>{r.delete(e.refId),i.delete(e.refId)}),{get:async function(n){const o=await t({type:"ref.get",name:n});if(!o)return;const a=r.get(o.refId)?.deref();if(a)return a;const s=function(n){i.has(n)||i.set(n,[]);const r=i.get(n);function o(e,r,i){return t({type:"ref.call",refId:n,name:e,data:r},i)}function a(e){return r.push(e),()=>{const t=r.indexOf(e);t>=0&&r.splice(t,1)}}return{frame:e,invoke:o,subscribe:a}}(o.refId);var c;return r.set(o.refId,(c=s,"undefined"!=typeof WeakRef?new WeakRef(c):{deref:()=>c})),s}}});function Ri(e){return"function"==typeof Symbol?Symbol(e):e}class ji{concat(){if(1===this.list.length)return Ni(this.current);const e=new Uint8Array(this.list.reduce((e,t)=>e+t.offset,0));return this.list.reduce((t,n)=>(e.set(new Uint8Array(Ni(n)),t),t+n.offset),0),e.buffer}ensureCapacity(e){const t=this.current,n=t.offset+e;if(n<=t.size)return;const r=t.buffer;!r.resizable||n>r.maxByteLength?(this.current=this.createBufferItem(),this.list.push(this.current)):(t.size=Math.min(2*t.size,r.maxByteLength),r.resize(t.size))}createBufferItem(){const e=new ArrayBuffer(65536,{maxByteLength:1048576});return{view:new DataView(e),buffer:e,size:e.byteLength,offset:0}}constructor(){J(this,"list",void 0),J(this,"current",void 0),this.current=this.createBufferItem(),this.list=[this.current]}}function Ni(e){return e.offset>=e.size?e.buffer:e.buffer.resizable&&e.buffer.transfer?e.buffer.transfer(e.offset):e.buffer.slice(0,e.offset)}const Ui=-Math.pow(2,31),Vi=Math.pow(2,31);function qi(){return{buffer:new ji,values:[],stringIndexMap:new Map}}function $i(e,t){e.buffer.ensureCapacity(1);const n=e.buffer.current;n.view.setUint8(n.offset,t),n.offset+=1}function zi(e,t){e.buffer.ensureCapacity(4);const n=e.buffer.current;n.view.setUint32(n.offset,t),n.offset+=4}function Fi(e,t){let n=e.stringIndexMap.get(t);n||(n=e.values.push(t),e.stringIndexMap.set(t,n)),zi(e,n-1)}function Ji(e,t){if(null!==t)switch(typeof t){case"number":if(function(e){if(!Number.isInteger(e))return!1;return Ui<=e&&e<Vi}(t)){$i(e,1),function(e,t){e.buffer.ensureCapacity(4);const n=e.buffer.current;n.view.setInt32(n.offset,t),n.offset+=4}(e,t);break}$i(e,2),function(e,t){e.buffer.ensureCapacity(8);const n=e.buffer.current;n.view.setFloat64(n.offset,t),n.offset+=8}(e,t);break;case"string":$i(e,6),Fi(e,t);break;case"boolean":$i(e,3),$i(e,t?1:0);break;case"undefined":$i(e,5);break;default:$i(e,6),function(e,t){zi(e,e.values.push(t)-1)}(e,t)}else $i(e,4)}const Gi=Ri("__WECOM_REFLECT_ID__"),Qi=Bi(({invoke:e})=>{const t="function"==typeof FinalizationRegistry?new FinalizationRegistry(function(e){$i(a,3),zi(a,e),c()}):null,n=new WeakSet;let r=1;const i=Promise.resolve();let o=!1,a=qi();function s(e){n.has(e)?($i(a,2),zi(a,e[Gi])):($i(a,1),Ji(a,e))}function c(){o||(o=!0,i.then(u))}function u(){o=!1;const t={buffer:(n=a).buffer.concat(),values:n.values};var n;a=qi(),e({type:"reflect.command",commands:t},{serialize:!1,dropResult:!0,transfer:[t.buffer]})}function f(){return r++}return{genReflectId:f,bind:function(e,r=f()){return n.has(e)?e[Gi]:(e[Gi]=r,n.add(e),t?.register(e,r),r)},set:function(e,t,n){const r=e[Gi];if(!r)throw new TypeError("Illegal invocation");$i(a,1),zi(a,r),Fi(a,t),s(n),c()},call:function(e,t,n,r){const i=e[Gi];if(!i)throw new TypeError("Illegal invocation");$i(a,2),zi(a,i),Fi(a,t),zi(a,(r?r[Gi]:0)??0),zi(a,n.length),n.forEach(s),c()}}});function Hi(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Ki(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Hi(e,t,"get"))}function Zi(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Xi(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Hi(e,t,"set"),n),n}const Yi=new WeakMap,eo=new WeakMap;function to(e,t){Yi.set(e,t),eo.set(t,e)}function no(e){return Yi.has(e)?Yi.get(e):e}function ro(e){return eo.has(e)?eo.get(e):e}let io=null;var oo=new WeakMap,ao=new WeakMap,so=new WeakMap;let co=Gi;class uo{get src(){return Ki(this,oo)}get loading(){return!Ki(this,ao)}get complete(){return Ki(this,ao)}get error(){return Ki(this,so)}__handleSettled(e){Xi(this,ao,!0),Xi(this,so,e),e?L(this.onerror,e):L(this.onload,void 0)}constructor(e){J(this,co,void 0),J(this,"onload",void 0),J(this,"onerror",void 0),Zi(this,oo,{writable:!0,value:void 0}),Zi(this,ao,{writable:!0,value:!1}),Zi(this,so,{writable:!0,value:void 0}),Xi(this,oo,e),to(this,(io||(io=new Image,io.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),io))}}const fo=Bi(({frame:e,invoke:t,subscribe:n})=>{const r=Qi(e),i=new Map;function o(e,t){return"string"==typeof e?{type:"url",src:e}:{type:"arraybuffer",data:e,mime:t}}return n("image.settled",e=>{const t=i.get(e.refId);i.delete(e.refId),t&&t(e)}),{createImage:function(e,n){const a=new uo(e),s=r.bind(a);return t({type:"image.load",refId:s,data:o(e,n)},{serialize:"string"==typeof e}),i.set(s,e=>{a.__handleSettled(e.error)}),a}}}),lo=Oi(e=>{const t=new Map;return e.subscribe(e=>{if("event.trigger"!==e.type)return;const n=t.get(`${e.capture}|${e.name}`);if(!n?.size)return;const r=function(e){const t=new CustomEvent(e.type,{detail:e.detail});for(const n of Object.keys(e))n in t||(t[n]=e[n]);return Object.defineProperties(t,{target:{value:e.target},currentTarget:{value:e.currentTarget}}),t}(e.event);for(const t of Array.from(n))L(t,r)}),{addListener:function(n,r,i){const o="boolean"==typeof i?i:!!i?.capture;t.has(`${o}|${n}`)||t.set(`${o}|${n}`,new Set);const a=t.get(`${o}|${n}`);a.size||e.invoke("event.subscribe",{name:n,capture:o}),a.add(r)},removeListener:function(n,r,i){const o="boolean"==typeof i?i:!!i?.capture;if(!t.has(`${o}|${n}`))return;const a=t.get(`${o}|${n}`);a.delete(r),a.size||e.invoke("event.unsubscribe",{name:n,capture:o})}}});var po=new WeakMap,ho=new WeakMap;let go=Gi;var mo=new WeakMap,wo=new WeakMap;let vo=Gi;class yo{addColorStop(e,t){Ki(this,wo).addColorStop(e,t),Ki(this,mo).call(this,"addColorStop",[e,t])}constructor(e,t){J(this,vo,void 0),Zi(this,mo,{writable:!0,value:void 0}),Zi(this,wo,{writable:!0,value:void 0}),Xi(this,mo,e),Xi(this,wo,t),e.bind(this),to(this,t)}}const Co=["fillStyle","filter","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle"],bo=["direction","font","fontKerning","fontStretch","fontVariantCaps","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","textAlign","textBaseline","textRendering","wordSpacing"],ko=["arc","arcTo","beginPath","bezierCurveTo","clip","closePath","ellipse","lineTo","moveTo","quadraticCurveTo","rect","reset","resetTransform","restore","rotate","roundRect","save","scale","setLineDash","setTransform","transform","translate"],So=["clearRect","drawFocusIfNeeded","drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],Io=["getContextAttributes","getLineDash","getTransform","isContextLost","isPointInPath","isPointInStroke","measureText"],xo=[["createConicGradient",yo],["createLinearGradient",yo],["createPattern",class{setTransform(e){Ki(this,ho).setTransform(e),Ki(this,po).call(this,"setTransform",[e])}constructor(e,t){J(this,go,void 0),Zi(this,po,{writable:!0,value:void 0}),Zi(this,ho,{writable:!0,value:void 0}),Xi(this,po,e),Xi(this,ho,t),e.bind(this),to(this,t)}}],["createRadialGradient",yo]],_o=Ri("__WECOM_INTERNAL__"),Ao=Oi((e,t,n)=>new Wo(e,t,n));let Mo=_o,To=Gi;class Wo{constructor(e,t,n){J(this,"canvas",void 0),J(this,Mo,void 0),J(this,To,void 0),this.canvas=e,this[_o]={store:t,native:n,props:Object.create(null)},t.bind(this),to(this,n)}}const Lo=Wo.prototype;for(const ea of Co)Object.defineProperty(Lo,ea,{configurable:!0,enumerable:!0,get(){const{native:e,props:t}=this[_o];return t[ea]??ro(e[ea])},set(e){const{store:t,props:n}=this[_o];n[ea]=no(e),t.set(this,ea,e)}});for(const ea of bo)Object.defineProperty(Lo,ea,{configurable:!0,enumerable:!0,get(){return ro(this[_o].native[ea])},set(e){const{store:t,native:n}=this[_o];n[ea]=no(e),t.set(this,ea,e)}});for(const ea of Io)Lo[ea]=function(...e){const{native:t}=this[_o];return Po(t,ea,e)};for(const ea of ko)Lo[ea]=function(...e){const{store:t,native:n}=this[_o];Po(n,ea,e),t.call(this,ea,e)};for(const ea of So)Lo[ea]=function(...e){const{store:t}=this[_o];t.call(this,ea,e)};for(const[ea,ta]of xo)Lo[ea]=function(...e){const{store:t,native:n}=this[_o],r=Po(n,ea,e),i=new ta(t,r);return t.call(this,ea,e,i),i};function Po(e,t,n){switch(n.length){case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4]);case 6:return e[t](n[0],n[1],n[2],n[3],n[4],n[5]);default:return e[t](...n)}}var Do=new WeakMap,Oo=new WeakMap,Bo=new WeakMap,Eo=new WeakMap,Ro=new WeakMap;let jo=Gi;class No{get width(){return Ki(this,Do).width}set width(e){Ki(this,Do).width=e,Ki(this,Oo).set(this,"width",e)}get height(){return Ki(this,Do).height}set height(e){Ki(this,Do).height=e,Ki(this,Oo).set(this,"height",e)}createImage(e,t){return Ki(this,Bo).createImage(e,t)}getContext(e,t){if("2d"!==e)throw new Error(`Failed to execute 'getContext' on 'FrameCanvas': The provided value '${e}' is not a valid enum value of type RenderingContextType`);if(Ki(this,Ro))return Ki(this,Ro);const n=Ki(this,Do).getContext(e,t);return Xi(this,Ro,Ao(this,Ki(this,Oo),n)),Ki(this,Oo).call(this,"getContext",[e,t],Ki(this,Ro)),Ki(this,Ro)}addEventListener(e,t,n){Ki(this,Eo).addListener(e,t,n)}removeEventListener(e,t,n){Ki(this,Eo).removeListener(e,t,n)}constructor(e,t,n){J(this,jo,void 0),Zi(this,Do,{writable:!0,value:void 0}),Zi(this,Oo,{writable:!0,value:void 0}),Zi(this,Bo,{writable:!0,value:void 0}),Zi(this,Eo,{writable:!0,value:void 0}),Zi(this,Ro,{writable:!0,value:void 0}),Xi(this,Do,new OffscreenCanvas(n.width,n.height)),Xi(this,Oo,Qi(e.frame)),Ki(this,Oo).bind(this,t),Xi(this,Bo,fo(e.frame)),Xi(this,Eo,lo(e)),to(this,Ki(this,Do))}}const Uo=new WeakMap,Vo=Oi(e=>{const{genReflectId:t}=Qi(e.frame);return t()});async function qo(e,t){const{get:n}=Ei(e),r=await n(t);if(!r)return;if(Uo.has(r))return Uo.get(r);const i=Vo(r),o=await r.invoke("bind",{refId:i});return o?(Uo.has(r)||Uo.set(r,new No(r,i,o)),Uo.get(r)):void 0}const $o=Oi(e=>({scrollTo(t){e.invoke("scrollTo",t)},scrollIntoView(t,n){e.invoke("scrollIntoView",{selector:t,options:n})}}));async function zo(e,t){const{get:n}=Ei(e),r=await n(t);if(r)return $o(r)}async function Fo(e,t,n){const{get:r}=Ei(e),i=await r(t);if(i)return i.invoke("nodeInfo.get",{fields:n})}function Jo(e){return function(e){const t="0123456789abcdef";let n,r="";for(let i=0;i<e.length;i++)n=e.charCodeAt(i),r+=t.charAt(n>>>4&15)+t.charAt(15&n);return r}(function(e){return function(e){let t="";for(let n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;const n=new Array(80);let r=1732584193,i=-271733879,o=-1732584194,a=271733878,s=-1009589776;for(let c=0;c<e.length;c+=16){const t=r,u=i,f=o,l=a,d=s;for(let p=0;p<80;p++){n[p]=p<16?e[c+p]:Ko(n[p-3]^n[p-8]^n[p-14]^n[p-16],1);const t=Ho(Ho(Ko(r,5),Go(p,i,o,a)),Ho(Ho(s,n[p]),Qo(p)));s=a,a=o,o=Ko(i,30),i=r,r=t}r=Ho(r,t),i=Ho(i,u),o=Ho(o,f),a=Ho(a,l),s=Ho(s,d)}return[r,i,o,a,s]}(function(e){const t=new Array(e.length>>2);for(let n=0;n<t.length;n++)t[n]=0;for(let n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e),8*e.length))}(e))}function Go(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function Qo(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function Ho(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Ko(e,t){return e<<t|e>>>32-t}function Zo(e){let t=e;"string"==typeof e&&(t={ticket:e});const n=t.nonceStr||Dr(),r=t.timestamp||Math.floor(Date.now()/1e3),o=t.url||i().split("#")[0];return{timestamp:r,nonceStr:n,signature:Jo(`jsapi_ticket=${t.ticket}&noncestr=${n}&timestamp=${r}&url=${o}`)}}const Xo={isWeChat:f,isWeCom:u},Yo=!0;export{it as CameraMode,Xe as ChooseMessageFileType,Wi as ColorScheme,mn as CreateExternalPaymentType,Sn as EntryType,Vn as EnvVersion,No as FrameCanvas,Yo as IS_WECOM_SDK,Zn as InTalkType,rr as InputCorpGroupContactMode,ir as InputCorpGroupContactType,Ct as LiveType,Be as LocationType,Ve as NetworkType,Cr as OAType,br as OaExtDataType,jn as OpenAppManagePageType,Gn as OpenUserProfileType,Hn as PrintFileIdType,nn as ProductViewType,oe as Proximity,xi as SDK_VERSION,tr as ScanQRCodeType,ar as SelectEnterpriseContactMode,sr as SelectEnterpriseContactType,fr as SelectExternalContactType,dr as SelectPrivilegedContactMode,nt as SizeType,rt as SourceType,Ye as TempFileType,Ai as WWLoginLangType,Ti as WWLoginPanelSizeType,Mi as WWLoginRedirectType,_i as WWLoginType,_t as WedocSelectedFileType,Xt as addCard,cn as addDevice,un as checkJsApi,ln as checkSchedule,Yt as chooseCard,ot as chooseImage,dn as chooseInvoice,et as chooseMessageFile,on as chooseWXPay,pn as claimClassAdmin,fe as closeBLEConnection,ye as closeBluetoothAdapter,Bt as closeWindow,Je as connectWifi,tn as consumeAndShareCard,ue as createBLEConnection,hn as createChatWithMsg,gn as createCorpGroupChat,xt as createDoc,wn as createExternalPayment,Vr as createJSAPIPanel,Si as createOpenDataFrameFactory,vn as createSchoolPayment,zo as createScrollViewContext,Pi as createWWLoginPanel,yn as discoverDevice,ct as downloadImage,St as downloadLivingReplay,vt as downloadVoice,H as ensureAgentConfigReady,Y as ensureConfigReady,Q as ensureCorpConfigReady,Cn as enterHWOpenTalk,bn as enterpriseVerify,Xo as env,kn as getApprovalSelectedItems,pe as getBLEDeviceCharacteristics,de as getBLEDeviceServices,Pe as getBeacons,Ce as getBluetoothAdapterState,Ie as getBluetoothDevices,qo as getCanvas,Te as getClipboardData,_e as getConnectedBluetoothDevices,Ke as getConnectedWifi,In as getContext,xn as getCurCorpGroupChat,_n as getCurCorpGroupContact,An as getCurExternalChat,Mn as getCurExternalContact,tt as getLocalFileData,ut as getLocalImgData,Re as getLocation,qe as getNetworkType,Fo as getNodeInfo,Tn as getShareInfo,Zo as getSignature,k as getVerifyParams,Ge as getWifiList,jt as hideAllNonBaseMenuItem,Wn as hideChatAttachmentMenu,Et as hideMenuItems,Dt as hideOptionMenu,Ar as initOpenData,$ as invoke,U as isWeixinJSBridgeReady,Ln as launchMiniprogram,Dn as navigateToAddCustomer,On as navigateToKfChat,me as notifyBLECharacteristicValueChange,q as on,we as onBLECharacteristicValueChange,le as onBLEConnectionStateChange,Oe as onBeaconServiceChange,De as onBeaconUpdate,be as onBluetoothAdapterStateChange,xe as onBluetoothDeviceFound,Qe as onGetWifiList,Pt as onHistoryBack,Ue as onLocationChange,qt as onMenuShareAppMessage,Ft as onMenuShareQQ,Gt as onMenuShareQZone,$t as onMenuShareTimeline,zt as onMenuShareWechat,Jt as onMenuShareWeibo,$e as onNetworkStatusChange,ce as onSearchBeacons,Vt as onUserCaptureScreen,mt as onVoicePlayEnd,dt as onVoiceRecordEnd,V as onWeixinJSBridgeReady,He as onWifiConnected,Bn as openAddress,En as openAppComment,Rn as openAppDeviceDataAuth,Nn as openAppManage,Un as openAppPurchase,ve as openBluetoothAdapter,qn as openBusinessView,en as openCard,Ut as openDefaultBrowser,$n as openDeviceProfile,zn as openEnterpriseChat,an as openEnterpriseRedPacket,Fn as openExistedChatWithMsg,Ee as openLocation,rn as openProductSpecificView,Jn as openThirdAppServiceChat,Qn as openUserProfile,ht as pauseVoice,pt as playVoice,Ze as previewFile,at as previewImage,Kn as printFile,Xn as queryCurrHWOpenTalk,he as readBLECharacteristicValue,Yn as refundExternalPayment,te as register,kt as replayLiving,er as saveApprovalSelectedItems,nr as scanQRCode,or as selectCorpGroupContact,cr as selectEnterpriseContact,ur as selectExternalChat,lr as selectExternalContact,pr as selectPrivilegedContact,hr as sendChatMessage,Me as setClipboardData,_r as setKeepScreenOn,gr as setShareAttr,Qt as shareAppMessage,mr as shareToExternalChat,wr as shareToExternalContact,vr as shareToExternalMoments,Ht as shareWechatMessage,Nt as showAllNonBaseMenuItem,Rt as showMenuItems,Ot as showOptionMenu,Ii as showSecurityGatewayConfirmModal,je as startAutoLBS,We as startBeaconDiscovery,ke as startBluetoothDevicesDiscovery,bt as startLiving,It as startMeeting,ft as startRecord,ae as startSearchBeacons,yr as startWecast,ze as startWifi,Ne as stopAutoLBS,Le as stopBeaconDiscovery,Se as stopBluetoothDevicesDiscovery,lt as stopRecord,se as stopSearchBeacons,gt as stopVoice,Fe as stopWifi,kr as thirdPartyOpenPage,yt as translateVoice,Zt as updateAppMessageShareData,Sr as updateCorpGroupChat,Ir as updateEnterpriseChat,xr as updateMomentsSetting,Kt as updateTimelineShareData,st as uploadImage,wt as uploadVoice,At as wedocSelectDoc,Mt as wedriveSelectDir,Tt as wedriveSelectFile,Lt as wedriveSelectFileForDownload,Wt as wedriveSelectFileForShare,ge as writeBLECharacteristicValue};
