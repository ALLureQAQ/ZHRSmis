"use strict";const e="undefined"!=typeof window?window:void 0,t="undefined"!=typeof document?document:void 0,n="undefined"!=typeof navigator?navigator:void 0,r="undefined"!=typeof location?location:void 0;function o(){return r?.href||""}function i(){return t?.title||""}const s=n?.userAgent||"",a=n?.platform||"",c=s?.match(/wxwork\/([\d.]+)/i)?.[1],u=!!c,p=!u&&/micromessenger/i.test(s),l=/\bAndroid\b/i.test(s),f=/Win/i.test(a),{isIOS:d,isMac:h}=function(){const e=n?.maxTouchPoints??1,t=/Mac/i.test(a);if(t&&e>2)return{isMac:!1,isIOS:!0};return{isMac:t,isIOS:/\b(iPhone|iPad|iPod)\b/i.test(s)}}();let g,m,w;function x(){return g}function y(){return m?.getResult()?.params}function v(){return w?.getResult()?.params}function C(){const e=x();if(u&&e?.getAgentConfigSignature){const e=v();return e?.corpid}const t=y();return t?.appId}function S(){const e=function(){const e=x();return u&&e?.getAgentConfigSignature?v():y()}();if(!e)return;const t=C();return{appId:t,verifyAppId:t,verifySignType:"sha1",verifyTimestamp:e.timestamp,verifyNonceStr:e.nonceStr,verifySignature:e.signature}}const b={config:"preVerifyJsApi",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareWechat:"menu:share:wechat",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress",getBrandWCPayRequest:"getBrandWCPayRequest"},k={};for(const Kn of Object.keys(b))k[b[Kn]]=Kn;function I(e){return b[e]||e}function A(e){return k[e]||e}function _(e){return e.map(I)}const M=o();function T(e){if("undefined"!=typeof Buffer)return Buffer.from(e).toString("base64");let t="";const n=new Uint8Array(e),r=n.byteLength;for(let o=0;o<r;o++)t+=String.fromCharCode(n[o]);return btoa(t)}function W(e){if("undefined"!=typeof Buffer)return Buffer.from(e,"base64").buffer;const t=atob(e),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}function B(e,t,n){if(R(e))try{return e.call(n,t)}catch(r){!function(...e){console.error("[wwsdk]",...e)}(r)}}function L(e,t){return e.slice(0,t.length)===t}function D(e){return e?M.split("#")[0]:o().split("#")[0]}function P(e){return V(e)?e.slice(e.indexOf(":")+1):""}function E(e){return!1===e||0===e}function O(e){return!!e&&"object"==typeof e}function R(e){return"function"==typeof e}function V(e){return"string"==typeof e}function N(e){return e?V(e)?e:e.join(";"):e}async function j(t,n){exports.isWeixinJSBridgeReady||await exports.onWeixinJSBridgeReady,e.WeixinJSBridge.on(t,n)}async function U(t,n={},r){exports.isWeixinJSBridgeReady||await exports.onWeixinJSBridgeReady;const o=await new Promise(r=>{const o={...n,...S()};e.WeixinJSBridge.invoke(t,o,r)});o.errMsg||(o.errMsg=function(e,t){const n=A(e);if(!t)return`${n}:ok`;let r=P(t);"confirm"===r&&(r="ok");"failed"===r&&(r="fail");L(r,"failed_")&&(r=r.slice(7));L(r,"fail_")&&(r=r.slice(5));r=r.replace(/_/g,"").toLowerCase(),("access denied"===r||"no permission to execute"===r)&&(r="permission denied");"config"===n&&"function not exist"===r&&(r="ok");r||(r="fail");return`${n}:${r}`}(t,o.err_msg||o.errmsg));const i=P(o.errMsg);if(null==o.errCode&&(o.errCode=null!=o.err_code?o.err_code:"ok"===i?0:-1),B(r,o),"ok"!==i&&"yes"!==i)throw o;return o}exports.isWeixinJSBridgeReady=!!e?.WeixinJSBridge,exports.onWeixinJSBridgeReady=Promise.resolve(),exports.isWeixinJSBridgeReady||(exports.onWeixinJSBridgeReady=new Promise(e=>{t?.addEventListener("WeixinJSBridgeReady",()=>{exports.isWeixinJSBridgeReady=!0,e()})}));class F extends Error{constructor(e){super(`SDK Error: ${e}`)}}class q extends F{constructor(){super("Aborted")}}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class J{checkValid(){return u&&this.url!==D(this.useOriginalURL)&&(this.error=new q),!this.error}getResult(){if(this.checkValid())return this.result}async awaitPromise(e){try{return this.result=await e,this.result}catch(t){throw this.error=t,t}}constructor(e,t){$(this,"type",void 0),$(this,"url",void 0),$(this,"promise",void 0),$(this,"result",void 0),$(this,"error",void 0),$(this,"useOriginalURL",void 0),this.type=e,this.useOriginalURL=p&&!f&&!h&&1===e,this.url=D(this.useOriginalURL),this.promise=this.awaitPromise(t(this.url))}}async function z(){const e=m;if(e?.checkValid())return e.promise;const t=new J(1,async e=>{const n=x();if(!n?.getConfigSignature)throw new F("Missing getConfigSignature");const r=await n.getConfigSignature(e);if(!t.checkValid())throw new q;const o=function(e,t){return{appId:e.corpId,timestamp:`${t.timestamp}`,nonceStr:t.nonceStr,signature:t.signature,jsApiList:_(e.jsApiList||["config"]),openTagList:_(e.openTagList||[])}}(n,r),i=await U("preVerifyJSAPI",{appId:o.appId,verifyJsApiList:o.jsApiList,verifyOpenTagList:o.openTagList,verifyAppId:o.appId,verifySignType:"sha1",verifyTimestamp:o.timestamp,verifyNonceStr:o.nonceStr,verifySignature:o.signature});if(!t.checkValid())throw new q;return{params:o,result:i}});return t.promise.then(e=>{const t=x();B(t?.onConfigSuccess,e.result),B(t?.onConfigComplete,e.result)},e=>{const t=x();B(t?.onConfigFail,e),B(t?.onConfigComplete,e)}),function(e){m=e}(t),t.promise}async function G(){const e=w;if(e?.checkValid())return e.promise;const t=new J(2,async e=>{let n;u&&function(e,t){const n=e?.split(".")||[],r=t?.split(".")||[];for(let o=0,i=Math.max(n.length,r.length);o<i;o++){const e=parseInt(n[o])||0,t=parseInt(r[o])||0;if(e>t)return 1;if(e<t)return-1}return 0}(c,"3.0.24")<0&&(n=z());const[r]=await Promise.all([Q(e),n]);if(!t.checkValid())throw new q;const o=await U("agentConfig",r);if(!t.checkValid())throw new q;return{params:r,result:o}});return t.promise.then(e=>H(e.result),e=>K(e)),function(e){w=e}(t),t.promise}async function Q(e){const t=x();if(!t?.getAgentConfigSignature)throw new F("Missing getAgentConfigSignature");const n=await t.getAgentConfigSignature(e);return{corpid:t.corpId,agentid:`${t.agentId}`,timestamp:`${n.timestamp}`,nonceStr:n.nonceStr,signature:n.signature,jsApiList:_(t.jsApiList||["agentConfig"])}}function H(e){const t=x();B(t?.onAgentConfigSuccess,e),B(t?.onAgentConfigComplete,e)}function K(e){const t=x();B(t?.onAgentConfigFail,e),B(t?.onAgentConfigComplete,e)}function Z(){const e=x();if(e)return u&&e.getAgentConfigSignature?G():e.getConfigSignature?z():void 0}async function X(e,t,n=t){return ee(t,async()=>(await Z(),U(e,n)))}async function Y(e,t,n){await Z(),j(e,()=>{ee(t,n)})}function ee(e,t){return t(e).then(t=>(B(e?.success,t),B(e?.complete,t),t),t=>{throw B("cancel"===P(t.errMsg)?e?.cancel:e?.fail,t),B(e?.complete,t),t})}var te=function(e){return e.CLProximityUnknown="0",e.CLProximityImmediate="1",e.CLProximityNear="2",e.CLProximityFar="3",e}({});function ne(e){if("string"==typeof e.advertisData&&(e.advertisData=W(e.advertisData)),e.serviceDataV2){const t=e.serviceDataV2;for(const e of Object.keys(t))"string"==typeof t[e]&&(t[e]=W(t[e]));e.serviceData=t,delete e.serviceDataV2}}var re=function(e){return e.wgs84="wgs84",e.gcj02="gcj02",e}({});var oe=function(e){return e.wifi="wifi",e.network2g="2g",e.network3g="3g",e.network4g="4g",e.none="none",e.unknown="unknown",e}({});var ie=function(e){return e.video="video",e.image="image",e.file="file",e.video_and_image="video_and_image",e}({}),se=function(e){return e.video="video",e.image="image",e.file="file",e}({});var ae=function(e){return e.original="original",e.compressed="compressed",e}({}),ce=function(e){return e.album="album",e.camera="camera",e}({}),ue=function(e){return e.normal="normal",e.batch="batch",e.front="front",e.batch_front="batch_front",e}({});var pe=function(e){return e[e.common=0]="common",e[e.corp_training=1]="corp_training",e[e.edu_normal_class=2]="edu_normal_class",e[e.edu_small_class=3]="edu_small_class",e}({});var le=function(e){return e[e.other=0]="other",e[e.doc=3]="doc",e[e.sheet=4]="sheet",e[e.form=5]="form",e[e.slide=6]="slide",e[e.mindmap=7]="mindmap",e[e.flowchart=8]="flowchart",e[e.smartsheet=10]="smartsheet",e}({});var fe=function(e){return e[e.normal=0]="normal",e[e.scan=1]="scan",e}({});function de(e){return{timeStamp:`${e.timestamp}`,nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function he(e){const t={};for(const n of Object.keys(e)){if(!O(e[n])){t[n]=e[n];continue}const r=he(e[n]);for(const e of Object.keys(r))t[`${n}.${e}`]=r[e]}return t}var ge=function(e){return e[e.chat=0]="chat",e[e.qrcode=1]="qrcode",e}({});var me=function(e){return e.contact_profile="contact_profile",e.single_chat_tools="single_chat_tools",e.group_chat_tools="group_chat_tools",e.chat_attachment="chat_attachment",e.single_kf_tools="single_kf_tools",e.chain_single_chat_tools="chain_single_chat_tools",e.chain_group_chat_tools="chain_group_chat_tools",e.internal_group_chat_board="internal_group_chat_board",e.normal="normal",e}({});function we(e){if(!e||!V(e))return;const[t,...n]=e.split("?");return n.length?`${t}.html?${n.join("?")}`:`${t}.html`}var xe=function(e){return e.permission="permission",e.datazone_permission="datazone_permission",e}({});var ye=function(e){return e.release="release",e.trial="trial",e.develop="develop",e}({});var ve=function(e){return e[e.internal=1]="internal",e[e.external=2]="external",e}({});var Ce=function(e){return e[e.mediaid=1]="mediaid",e[e.url=2]="url",e[e.localId=4]="localId",e}({});var Se=function(e){return e.None="None",e.HWOpenTalk="HWOpenTalk",e.VoIP="VoIP",e.SystemCall="SystemCall",e}({});var be=function(e){return e.qrCode="qrCode",e.barCode="barCode",e}({});var ke=function(e){return e.single="single",e.multi="multi",e}({}),Ie=function(e){return e.department="department",e.user="user",e}({});var Ae=function(e){return e.single="single",e.multi="multi",e}({}),_e=function(e){return e.department="department",e.user="user",e}({});var Me=function(e){return e[e.all=0]="all",e[e.unselected=1]="unselected",e}({});var Te=function(e){return e.single="single",e.multi="multi",e}({});var We=function(e){return e.create_approval="10001",e.view_approval="10002",e}({}),Be=function(e){return e.link="link",e.text="text",e}({});function Le(t={}){return ee(t,async()=>{if(!u)return async function(){if(!e?.WWOpenData?.agentConfig)throw new F("Missing WWOpenData.agentConfig");const t=await Q(D()),n=new Promise((n,r)=>{e.WWOpenData.agentConfig({...t,success:n,fail:r})});return n.then(H,K),n}();const{result:t}=await G();if(!f&&!e?.WeixinSandBox)throw new F("Missing WeixinSandBox");if(e?.WWOpenData||await U("wwapp.initWwOpenData"),!e?.WWOpenData)throw new F("Init WWOpenData failed");return e.WWOpenData.initJSSDK&&e.WWOpenData.initJSSDK({invoke:U,ensureAgentConfigReady:G}),t})}function De(e){const t=document.createElement("iframe"),{style:n}=t;n.display="block",n.border="none",n.background="transparent",t.referrerPolicy="origin",t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true");const r=function(e){if("string"==typeof e)return document.querySelector(e);return e}(e);return r&&r.appendChild(t),t}const Pe=Ve();let Ee,Oe=0;function Re(){return`${Pe}-${Oe++}`}function Ve(){return Math.random().toString(36).slice(2)}function Ne(e){return e&&"object"==typeof e?{...e,message:e.message,stack:e.stack}:e}function je(e){try{return"string"==typeof e?JSON.parse(e):e}catch(t){}}function Ue(e,t,n){const r=[];let o=!1,i=!1;function s(n){if(n.origin!==t||e.contentWindow!==n.source)return;const r=je(n.data);"string"==typeof r?.type&&r.type.startsWith("ww-iframe-handle:")&&l(r,n)}window.addEventListener("message",s);const a=new MessageChannel;a.port1.onmessage=e=>{l(je(e.data),e)};const{invoke:c,handleCallMessage:u,handleResponseMessage:p}=function(e,t){const n=new Map;return{invoke:function(t,r){return r?.dropResult?(e({type:"ww-iframe-handle:call",args:t},r),Promise.resolve(void 0)):new Promise((o,i)=>{const s=Re();n.set(s,{resolve:o,reject:i}),e({type:"ww-iframe-handle:call",uid:s,args:t},r)})},handleCallMessage:async function(n,r){if(!n.uid)return t(n.args,r);try{e({type:"ww-iframe-handle:response",uid:n.uid,kind:"resolve",args:await t(n.args,r)})}catch(o){throw e({type:"ww-iframe-handle:response",uid:n.uid,kind:"reject",args:Ne(o)}),o}},handleResponseMessage:function(e){const t=n.get(e.uid);t&&(t[e.kind](e.args),n.delete(e.uid))}}}(function(e,t){o?f(e,t):r.push({msg:e,opts:t})},n);function l(e,t){switch(e.type){case"ww-iframe-handle:ready":return function(e){if(o)return;o=!0,e.supportChannel&&(f({type:"ww-iframe-handle:set-port",port:a.port2},{transfer:[a.port2],serialize:!1}),i=!0);for(const t of r)f(t.msg,t.opts)}(e);case"ww-iframe-handle:call":return u(e,t);case"ww-iframe-handle:response":return void p(e)}}function f(n,r){const o=!1===r?.serialize?n:JSON.stringify(n);i?a.port1.postMessage(o,r?.transfer):e.contentWindow?.postMessage(o,t,r?.transfer)}return e.addEventListener("load",()=>{o||f({type:"ww-iframe-handle:init"})}),{el:e,invoke:c,dispose:function(){window.removeEventListener("message",s),a.port1.onmessage=null}}}function Fe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qe(e,t,n){B(t[e.name],e.payload||e.data,n)}function $e(){const e=new Map;return{subscribe:function(t,n){e.set(t,n)},handleMessage:function(t){return e.get(t.type)?.(t)}}}function Je(e,t){Ee?.();const n=De(document.body),{style:r}=n;r.position="fixed",r.left="0",r.top="0",r.zIndex="1000",r.width="100vw",r.height="100vh",n.classList.add("wecom-jssdk-modal"),n.setAttribute("src",e);const{origin:o}=new URL(e),i=Ue(n,o,e=>("close"===e.type&&s(),t?.(e)));function s(){i.dispose(),n.parentNode?.removeChild(n)}return Ee=s,i}const ze={agentConfig:Q,suiteConfig:async function(e){const t=x();if(!t?.getSuiteConfigSignature)throw new F("Missing getSuiteConfigSignature");const n=await t.getSuiteConfigSignature(e);return{suiteid:t.suiteId,timestamp:`${n.timestamp}`,nonceStr:n.nonceStr,signature:n.signature,jsApiList:_(t.jsApiList||["agentConfig"])}}};async function Ge(e,t){let n=new Error("Missing signature handler");for(const o of t)try{if(!Fe(ze,o))continue;return{type:o,params:await ze[o](e)}}catch(r){n=r}throw n}function Qe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function He(e){return"object"==typeof e&&null!==e}function Ke(e,t){return!!e&&e.indexOf(t)>=0}var Ze=Ye("Identifier","name"),Xe=Ye("Literal","value");function Ye(e,t){return function(n){var r;return(r={type:e})[t]=n,r}}function et(e){return ot(e,65,90)||ot(e,97,122)||36===e||95===e}function tt(e){return et(e)||nt(e)}function nt(e){return ot(e,48,57)}function rt(e){return nt(e)||ot(e,65,70)||ot(e,97,102)}function ot(e,t,n){return e>=t&&e<=n}for(var it={null:null,true:!0,false:!1,NaN:NaN,Infinity:1/0},st="await break case catch class const continue debugger default delete do else enum export extends false finally for function if import in instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),at={},ct=0,ut=st;ct<ut.length;ct++){at[ut[ct]]=!0}function pt(e){et(e.peek())||e.unexpected();var t=e.index;do{e.next()}while(tt(e.peek()));return e.expr.slice(t,e.index)}var lt={n:"\n",r:"\r",t:"\t"};function ft(e){var t=e.peek();return nt(t)||46===t?function(e){for(var t="";nt(e.peek());)t+=e.nextCh();if("0"===t){if(e.eat(120)||e.eat(88)){for(t="";rt(e.peek());)t+=e.nextCh();return t||e.unexpected(),e.build(Xe(parseInt(t,16)))}if(e.eat(98)||e.eat(66)){for(t="";48===e.peek()||49===e.peek();)t+=e.nextCh();return t||e.unexpected(),e.build(Xe(parseInt(t,2)))}}if(46===e.peek())for(t+=e.nextCh();nt(e.peek());)t+=e.nextCh();if(101===e.peek()||69===e.peek()){t+=e.nextCh(),43!==e.peek()&&45!==e.peek()||(t+=e.nextCh());for(var n=!1;nt(e.peek());)n=!0,t+=e.nextCh();n||e.unexpected()}return et(e.peek())&&e.throw("Variable name cannot start with a number (".concat(t).concat(e.peekCh(),").")),46!==e.peek()&&"."!==t||e.unexpected(),e.build(Xe(parseFloat(t)))}(e):39===t||34===t?function(e){for(var t,n=e.nextCh(),r="";t=e.nextCh();){if(t===n)return e.build(Xe(r));"\\"===t?(t=e.nextCh(),Qe(lt,t)?r+=lt[t]:r+=t):r+=t}e.unexpected()}(e):et(t)?function(e){var t=pt(e);return Qe(it,t)?e.build(Xe(it[t])):(Qe(at,t)&&e.unexpected(t),e.build(Ze(t)))}(e):void e.unexpected()}function dt(e,t,n){var r;return void 0===n&&(n=!1),n?(e.expect(91),r=ht(e),e.expect(93)):r=function(e){var t=pt(e);return e.build(Ze(t))}(e),e.build({type:"MemberExpression",object:t,property:r,computed:n})}function ht(e){return function(e){for(var t,n=ft(e);t=e.peek();)if(91!==t){if(!e.eat(46))break;n=dt(e,n)}else n=dt(e,n,!0);return n}(e)}function gt(e){var t,n={expr:t=e.trim(),index:0,peek:function(){return this.expr.charCodeAt(this.index)},peekCh:function(){return this.expr.charAt(this.index)},next:function(){this.index+=1},nextCh:function(){return this.index+=1,this.expr.charAt(this.index-1)},eat:function(e){return this.peek()===e&&(this.next(),this.skipWhitespace(),!0)},expect:function(e){this.eat(e)||this.unexpected()},skip:function(e){this.index+=e,this.skipWhitespace()},skipWhitespace:function(){for(var e=t.charCodeAt(this.index);32===e||9===e||13===e||10===e;)this.index+=1,e=t.charCodeAt(this.index);return this.index},build:function(e){return this.skipWhitespace(),e},unexpected:function(e){if(!e&&this.index>=t.length)throw this.throw("Unexpected end of input.");throw this.throw("Unexpected token '".concat(e||this.peekCh(),"'."))},throw:function(e){throw new SyntaxError("".concat(e," (1:").concat(this.index,")"))}},r=ht(n);return n.index!==n.expr.length&&n.unexpected(),r}var mt=["constrcutor","prototype","__proto__"];function wt(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),"Identifier"===e.type)return n.unshift(e.name),n;if("MemberExpression"===e.type){var r=e.object,o=e.property;if(e.computed){if("Literal"!==o.type)return;var i=o.value;if(Ke(t,i))return;n.unshift(i)}else{if("Identifier"!==o.type)return;var s=o.name;if(Ke(t,s))return;n.unshift(s)}return wt(r,t,n)}}function xt(e,t,n,r){for(var o=e,i=0,s=t.length-1;i<s;i++){var a=t[i];Qe(o,a)&&He(o[a])||r(o,a,"string"==typeof t[i+1]?{}:[]),o=o[a]}return r(o,t[t.length-1],n),o}function yt(e,t,n){e[t]=n}function vt(e){if(Array.isArray(e))return e.map(vt);if(null==e||"object"!=typeof e)return e;const t={};for(const n of Object.keys(e))t[n]=vt(e[n]);return t}const Ct=new WeakMap;function St(e){return Object.keys(e).filter(t=>"function"==typeof e[t])}function bt(e){return Object.entries(e).reduce((e,[t,n])=>("function"!=typeof n&&(e[t]=n),e),{})}const kt="https://open.work.weixin.qq.com",It=`${kt}/wwopen/ww-open-data-frame`,At=["constructor","prototype","__proto__","__ob__"];const _t="2.3.3";var Mt=function(e){return e.serviceApp="ServiceApp",e.corpApp="CorpApp",e}({}),Tt=function(e){return e.zh="zh",e.en="en",e}({}),Wt=function(e){return e.top="top",e.callback="callback",e.self="self",e}({}),Bt=function(e){return e.middle="middle",e.small="small",e}({}),Lt=function(e){return e.Light="light",e.Dark="dark",e.Auto="auto",e}({});const Dt={[Bt.middle]:["480px","416px"],[Bt.small]:["320px","380px"]};function Pt(e=""){try{return new URL(e)?.origin}catch(t){return""}}function Et(e){const t=new WeakMap;return(n,...r)=>(t.has(n)||t.set(n,e(n,...r)),t.get(n))}function Ot(e){return Et(t=>{const n=function(e){return Ct.get(e)}(t);if(!n)throw new TypeError("Illegal invocation");return e(n)})}const Rt=Ot(({frame:e,invoke:t,subscribe:n})=>{const r=new Map,o=new Map;return n("ref.event",e=>{const t=o.get(e.refId);if(t)for(const n of t)n(e.data)}),n("refDispose",e=>{r.delete(e.refId),o.delete(e.refId)}),{get:async function(n){const i=await t({type:"ref.get",name:n});if(!i)return;const s=r.get(i.refId)?.deref();if(s)return s;const a=function(n){o.has(n)||o.set(n,[]);const r=o.get(n);function i(e,r,o){return t({type:"ref.call",refId:n,name:e,data:r},o)}function s(e){return r.push(e),()=>{const t=r.indexOf(e);t>=0&&r.splice(t,1)}}return{frame:e,invoke:i,subscribe:s}}(i.refId);var c;return r.set(i.refId,(c=a,"undefined"!=typeof WeakRef?new WeakRef(c):{deref:()=>c})),a}}});function Vt(e){return"function"==typeof Symbol?Symbol(e):e}class Nt{concat(){if(1===this.list.length)return jt(this.current);const e=new Uint8Array(this.list.reduce((e,t)=>e+t.offset,0));return this.list.reduce((t,n)=>(e.set(new Uint8Array(jt(n)),t),t+n.offset),0),e.buffer}ensureCapacity(e){const t=this.current,n=t.offset+e;if(n<=t.size)return;const r=t.buffer;!r.resizable||n>r.maxByteLength?(this.current=this.createBufferItem(),this.list.push(this.current)):(t.size=Math.min(2*t.size,r.maxByteLength),r.resize(t.size))}createBufferItem(){const e=new ArrayBuffer(65536,{maxByteLength:1048576});return{view:new DataView(e),buffer:e,size:e.byteLength,offset:0}}constructor(){$(this,"list",void 0),$(this,"current",void 0),this.current=this.createBufferItem(),this.list=[this.current]}}function jt(e){return e.offset>=e.size?e.buffer:e.buffer.resizable&&e.buffer.transfer?e.buffer.transfer(e.offset):e.buffer.slice(0,e.offset)}const Ut=-Math.pow(2,31),Ft=Math.pow(2,31);function qt(){return{buffer:new Nt,values:[],stringIndexMap:new Map}}function $t(e,t){e.buffer.ensureCapacity(1);const n=e.buffer.current;n.view.setUint8(n.offset,t),n.offset+=1}function Jt(e,t){e.buffer.ensureCapacity(4);const n=e.buffer.current;n.view.setUint32(n.offset,t),n.offset+=4}function zt(e,t){let n=e.stringIndexMap.get(t);n||(n=e.values.push(t),e.stringIndexMap.set(t,n)),Jt(e,n-1)}function Gt(e,t){if(null!==t)switch(typeof t){case"number":if(function(e){if(!Number.isInteger(e))return!1;return Ut<=e&&e<Ft}(t)){$t(e,1),function(e,t){e.buffer.ensureCapacity(4);const n=e.buffer.current;n.view.setInt32(n.offset,t),n.offset+=4}(e,t);break}$t(e,2),function(e,t){e.buffer.ensureCapacity(8);const n=e.buffer.current;n.view.setFloat64(n.offset,t),n.offset+=8}(e,t);break;case"string":$t(e,6),zt(e,t);break;case"boolean":$t(e,3),$t(e,t?1:0);break;case"undefined":$t(e,5);break;default:$t(e,6),function(e,t){Jt(e,e.values.push(t)-1)}(e,t)}else $t(e,4)}const Qt=Vt("__WECOM_REFLECT_ID__"),Ht=Ot(({invoke:e})=>{const t="function"==typeof FinalizationRegistry?new FinalizationRegistry(function(e){$t(s,3),Jt(s,e),c()}):null,n=new WeakSet;let r=1;const o=Promise.resolve();let i=!1,s=qt();function a(e){n.has(e)?($t(s,2),Jt(s,e[Qt])):($t(s,1),Gt(s,e))}function c(){i||(i=!0,o.then(u))}function u(){i=!1;const t={buffer:(n=s).buffer.concat(),values:n.values};var n;s=qt(),e({type:"reflect.command",commands:t},{serialize:!1,dropResult:!0,transfer:[t.buffer]})}function p(){return r++}return{genReflectId:p,bind:function(e,r=p()){return n.has(e)?e[Qt]:(e[Qt]=r,n.add(e),t?.register(e,r),r)},set:function(e,t,n){const r=e[Qt];if(!r)throw new TypeError("Illegal invocation");$t(s,1),Jt(s,r),zt(s,t),a(n),c()},call:function(e,t,n,r){const o=e[Qt];if(!o)throw new TypeError("Illegal invocation");$t(s,2),Jt(s,o),zt(s,t),Jt(s,(r?r[Qt]:0)??0),Jt(s,n.length),n.forEach(a),c()}}});function Kt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Zt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Kt(e,t,"get"))}function Xt(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Yt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Kt(e,t,"set"),n),n}const en=new WeakMap,tn=new WeakMap;function nn(e,t){en.set(e,t),tn.set(t,e)}function rn(e){return en.has(e)?en.get(e):e}function on(e){return tn.has(e)?tn.get(e):e}let sn=null;var an=new WeakMap,cn=new WeakMap,un=new WeakMap;let pn=Qt;class ln{get src(){return Zt(this,an)}get loading(){return!Zt(this,cn)}get complete(){return Zt(this,cn)}get error(){return Zt(this,un)}__handleSettled(e){Yt(this,cn,!0),Yt(this,un,e),e?B(this.onerror,e):B(this.onload,void 0)}constructor(e){$(this,pn,void 0),$(this,"onload",void 0),$(this,"onerror",void 0),Xt(this,an,{writable:!0,value:void 0}),Xt(this,cn,{writable:!0,value:!1}),Xt(this,un,{writable:!0,value:void 0}),Yt(this,an,e),nn(this,(sn||(sn=new Image,sn.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),sn))}}const fn=Ot(({frame:e,invoke:t,subscribe:n})=>{const r=Ht(e),o=new Map;function i(e,t){return"string"==typeof e?{type:"url",src:e}:{type:"arraybuffer",data:e,mime:t}}return n("image.settled",e=>{const t=o.get(e.refId);o.delete(e.refId),t&&t(e)}),{createImage:function(e,n){const s=new ln(e),a=r.bind(s);return t({type:"image.load",refId:a,data:i(e,n)},{serialize:"string"==typeof e}),o.set(a,e=>{s.__handleSettled(e.error)}),s}}}),dn=Et(e=>{const t=new Map;return e.subscribe(e=>{if("event.trigger"!==e.type)return;const n=t.get(`${e.capture}|${e.name}`);if(!n?.size)return;const r=function(e){const t=new CustomEvent(e.type,{detail:e.detail});for(const n of Object.keys(e))n in t||(t[n]=e[n]);return Object.defineProperties(t,{target:{value:e.target},currentTarget:{value:e.currentTarget}}),t}(e.event);for(const t of Array.from(n))B(t,r)}),{addListener:function(n,r,o){const i="boolean"==typeof o?o:!!o?.capture;t.has(`${i}|${n}`)||t.set(`${i}|${n}`,new Set);const s=t.get(`${i}|${n}`);s.size||e.invoke("event.subscribe",{name:n,capture:i}),s.add(r)},removeListener:function(n,r,o){const i="boolean"==typeof o?o:!!o?.capture;if(!t.has(`${i}|${n}`))return;const s=t.get(`${i}|${n}`);s.delete(r),s.size||e.invoke("event.unsubscribe",{name:n,capture:i})}}});var hn=new WeakMap,gn=new WeakMap;let mn=Qt;var wn=new WeakMap,xn=new WeakMap;let yn=Qt;class vn{addColorStop(e,t){Zt(this,xn).addColorStop(e,t),Zt(this,wn).call(this,"addColorStop",[e,t])}constructor(e,t){$(this,yn,void 0),Xt(this,wn,{writable:!0,value:void 0}),Xt(this,xn,{writable:!0,value:void 0}),Yt(this,wn,e),Yt(this,xn,t),e.bind(this),nn(this,t)}}const Cn=["fillStyle","filter","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle"],Sn=["direction","font","fontKerning","fontStretch","fontVariantCaps","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","textAlign","textBaseline","textRendering","wordSpacing"],bn=["arc","arcTo","beginPath","bezierCurveTo","clip","closePath","ellipse","lineTo","moveTo","quadraticCurveTo","rect","reset","resetTransform","restore","rotate","roundRect","save","scale","setLineDash","setTransform","transform","translate"],kn=["clearRect","drawFocusIfNeeded","drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],In=["getContextAttributes","getLineDash","getTransform","isContextLost","isPointInPath","isPointInStroke","measureText"],An=[["createConicGradient",vn],["createLinearGradient",vn],["createPattern",class{setTransform(e){Zt(this,gn).setTransform(e),Zt(this,hn).call(this,"setTransform",[e])}constructor(e,t){$(this,mn,void 0),Xt(this,hn,{writable:!0,value:void 0}),Xt(this,gn,{writable:!0,value:void 0}),Yt(this,hn,e),Yt(this,gn,t),e.bind(this),nn(this,t)}}],["createRadialGradient",vn]],_n=Vt("__WECOM_INTERNAL__"),Mn=Et((e,t,n)=>new Bn(e,t,n));let Tn=_n,Wn=Qt;class Bn{constructor(e,t,n){$(this,"canvas",void 0),$(this,Tn,void 0),$(this,Wn,void 0),this.canvas=e,this[_n]={store:t,native:n,props:Object.create(null)},t.bind(this),nn(this,n)}}const Ln=Bn.prototype;for(const Kn of Cn)Object.defineProperty(Ln,Kn,{configurable:!0,enumerable:!0,get(){const{native:e,props:t}=this[_n];return t[Kn]??on(e[Kn])},set(e){const{store:t,props:n}=this[_n];n[Kn]=rn(e),t.set(this,Kn,e)}});for(const Kn of Sn)Object.defineProperty(Ln,Kn,{configurable:!0,enumerable:!0,get(){return on(this[_n].native[Kn])},set(e){const{store:t,native:n}=this[_n];n[Kn]=rn(e),t.set(this,Kn,e)}});for(const Kn of In)Ln[Kn]=function(...e){const{native:t}=this[_n];return Dn(t,Kn,e)};for(const Kn of bn)Ln[Kn]=function(...e){const{store:t,native:n}=this[_n];Dn(n,Kn,e),t.call(this,Kn,e)};for(const Kn of kn)Ln[Kn]=function(...e){const{store:t}=this[_n];t.call(this,Kn,e)};for(const[Kn,Zn]of An)Ln[Kn]=function(...e){const{store:t,native:n}=this[_n],r=Dn(n,Kn,e),o=new Zn(t,r);return t.call(this,Kn,e,o),o};function Dn(e,t,n){switch(n.length){case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4]);case 6:return e[t](n[0],n[1],n[2],n[3],n[4],n[5]);default:return e[t](...n)}}var Pn=new WeakMap,En=new WeakMap,On=new WeakMap,Rn=new WeakMap,Vn=new WeakMap;let Nn=Qt;class jn{get width(){return Zt(this,Pn).width}set width(e){Zt(this,Pn).width=e,Zt(this,En).set(this,"width",e)}get height(){return Zt(this,Pn).height}set height(e){Zt(this,Pn).height=e,Zt(this,En).set(this,"height",e)}createImage(e,t){return Zt(this,On).createImage(e,t)}getContext(e,t){if("2d"!==e)throw new Error(`Failed to execute 'getContext' on 'FrameCanvas': The provided value '${e}' is not a valid enum value of type RenderingContextType`);if(Zt(this,Vn))return Zt(this,Vn);const n=Zt(this,Pn).getContext(e,t);return Yt(this,Vn,Mn(this,Zt(this,En),n)),Zt(this,En).call(this,"getContext",[e,t],Zt(this,Vn)),Zt(this,Vn)}addEventListener(e,t,n){Zt(this,Rn).addListener(e,t,n)}removeEventListener(e,t,n){Zt(this,Rn).removeListener(e,t,n)}constructor(e,t,n){$(this,Nn,void 0),Xt(this,Pn,{writable:!0,value:void 0}),Xt(this,En,{writable:!0,value:void 0}),Xt(this,On,{writable:!0,value:void 0}),Xt(this,Rn,{writable:!0,value:void 0}),Xt(this,Vn,{writable:!0,value:void 0}),Yt(this,Pn,new OffscreenCanvas(n.width,n.height)),Yt(this,En,Ht(e.frame)),Zt(this,En).bind(this,t),Yt(this,On,fn(e.frame)),Yt(this,Rn,dn(e)),nn(this,Zt(this,Pn))}}const Un=new WeakMap,Fn=Et(e=>{const{genReflectId:t}=Ht(e.frame);return t()});const qn=Et(e=>({scrollTo(t){e.invoke("scrollTo",t)},scrollIntoView(t,n){e.invoke("scrollIntoView",{selector:t,options:n})}}));function $n(e){return function(e){const t="0123456789abcdef";let n,r="";for(let o=0;o<e.length;o++)n=e.charCodeAt(o),r+=t.charAt(n>>>4&15)+t.charAt(15&n);return r}(function(e){return function(e){let t="";for(let n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;const n=new Array(80);let r=1732584193,o=-271733879,i=-1732584194,s=271733878,a=-1009589776;for(let c=0;c<e.length;c+=16){const t=r,u=o,p=i,l=s,f=a;for(let d=0;d<80;d++){n[d]=d<16?e[c+d]:Qn(n[d-3]^n[d-8]^n[d-14]^n[d-16],1);const t=Gn(Gn(Qn(r,5),Jn(d,o,i,s)),Gn(Gn(a,n[d]),zn(d)));a=s,s=i,i=Qn(o,30),o=r,r=t}r=Gn(r,t),o=Gn(o,u),i=Gn(i,p),s=Gn(s,l),a=Gn(a,f)}return[r,o,i,s,a]}(function(e){const t=new Array(e.length>>2);for(let n=0;n<t.length;n++)t[n]=0;for(let n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e),8*e.length))}(e))}function Jn(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function zn(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function Gn(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Qn(e,t){return e<<t|e>>>32-t}const Hn={isWeChat:p,isWeCom:u};exports.CameraMode=ue,exports.ChooseMessageFileType=ie,exports.ColorScheme=Lt,exports.CreateExternalPaymentType=ge,exports.EntryType=me,exports.EnvVersion=ye,exports.FrameCanvas=jn,exports.IS_WECOM_SDK=!0,exports.InTalkType=Se,exports.InputCorpGroupContactMode=ke,exports.InputCorpGroupContactType=Ie,exports.LiveType=pe,exports.LocationType=re,exports.NetworkType=oe,exports.OAType=We,exports.OaExtDataType=Be,exports.OpenAppManagePageType=xe,exports.OpenUserProfileType=ve,exports.PrintFileIdType=Ce,exports.ProductViewType=fe,exports.Proximity=te,exports.SDK_VERSION=_t,exports.ScanQRCodeType=be,exports.SelectEnterpriseContactMode=Ae,exports.SelectEnterpriseContactType=_e,exports.SelectExternalContactType=Me,exports.SelectPrivilegedContactMode=Te,exports.SizeType=ae,exports.SourceType=ce,exports.TempFileType=se,exports.WWLoginLangType=Tt,exports.WWLoginPanelSizeType=Bt,exports.WWLoginRedirectType=Wt,exports.WWLoginType=Mt,exports.WedocSelectedFileType=le,exports.addCard=function(e){return ee(e,async()=>{await Z();const t=await U("batchAddCard",{card_list:e.cardList.map(e=>({card_id:e.cardId,card_ext:e.cardExt}))});if(!t.card_list)return t;for(const e of t.card_list)e.cardId=e.card_id,delete e.card_id,e.cardExt=e.card_ext,delete e.card_ext,e.isSuccess=!!e.is_succ,delete e.is_succ;return t.cardList=t.card_list,delete t.card_list,t})},exports.addDevice=function(e){return X("addDevice",e)},exports.checkJsApi=async function(e){return ee(e,async()=>{await Z();const t=await U("checkJsApi",{jsApiList:_(e.jsApiList)});if("string"==typeof t.checkResult)try{t.checkResult=JSON.parse(t.checkResult)}catch(n){t.checkResult={}}return t.checkResult=function(e){const t={...e};for(const n of Object.keys(e))t[A(n)]=e[n];return t}(he(t.checkResult)),t})},exports.checkSchedule=function(e){return X("checkSchedule",e)},exports.chooseCard=function(e){return ee(e,async()=>{await Z();const t=await U("chooseCard",{app_id:C(),location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:`${e.timestamp}`,nonce_str:e.nonceStr});return t.cardList=t.choose_card_info,delete t.choose_card_info,t})},exports.chooseImage=function(e={}){return ee(e,async()=>{await Z();const t=await U("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"],defaultCameraMode:e.defaultCameraMode||"normal",isSaveToAlbum:E(e.isSaveToAlbum)?0:1});if(l&&t.localIds){t.localIds=t.localIds||"[]";try{t.localIds=JSON.parse(t.localIds)}catch(n){}}return t})},exports.chooseInvoice=function(e){return X("chooseInvoice",e)},exports.chooseMessageFile=function(e){return X("chooseMessageFile",e)},exports.chooseWXPay=function(e){return X("getBrandWCPayRequest",e,de(e))},exports.claimClassAdmin=function(e={}){return X("claimClassAdmin",e)},exports.closeBLEConnection=function(e){return X("closeBLEConnection",e)},exports.closeBluetoothAdapter=function(e={}){return X("closeBluetoothAdapter",e)},exports.closeWindow=function(e={}){return X("closeWindow",e)},exports.connectWifi=function(e){return X("connectWifi",e)},exports.consumeAndShareCard=function(e){return X("consumedShareCard",e,{consumedCardId:e.cardId,consumedCode:e.code})},exports.createBLEConnection=function(e){return X("createBLEConnection",e)},exports.createChatWithMsg=function(e){return X("createChatWithMsg",e)},exports.createCorpGroupChat=function(e){return X("createCorpGroupChat",e,{groupName:e.groupName||"",userIds:e.userIds,openUserIds:e.openUserIds,externalUserIds:e.externalUserIds,corpGroupUserIds:e.corpGroupUserIds})},exports.createDoc=function(e){return X("createDoc",e)},exports.createExternalPayment=function(e={}){return X("createExternalPayment",e)},exports.createJSAPIPanel=function(e,t){const n=De(t.el),{style:r}=n;r.width="100%",r.height="100%";const o=new Map,{subscribe:i,handleMessage:s}=$e(),{dispose:a}=Ue(n,"https://login.work.weixin.qq.com",s);return i("call",e=>{qe(e,t)}),i("getStaticOptions",()=>({name:e,options:{...t,el:void 0,params:void 0}})),i("jsapiCallback",e=>{if(!o.has(e.seq))return;const t=o.get(e.seq);o.delete(e.seq),B("success"===e.kind?t?.success:t?.fail,e.payload),B(t?.complete,e.payload)}),i("getJSAPIParams",async n=>{const r=R(t.params)?await t.params():t.params,i=D();return o.set(n.seq,r),{webToken:t.webToken,url:i,configParams:n.payload?.skipSignature?void 0:await Ge(i,n.payload?.preferSignatureTypeList||["agentConfig"]),jsapi:e,jsapiParams:r}}),i("openModalFrame",e=>{Je(e.payload.url)}),n.style.opacity="0",n.src="https://login.work.weixin.qq.com/wwopen/ww-jsapi-transparent-frame",{el:n,unmount(){a(),n.parentNode?.removeChild(n)}}},exports.createOpenDataFrameFactory=function(t){const n=u?Le():void 0;let r=o();async function o(){if(u)try{return await n,function(t){return new Promise((n,r)=>{e.WWOpenData.createOpenSessionInjector(t,(e,t)=>{e||!t?r(e||new Error("System error")):n(t)})})}({url:It})}catch(r){throw B(t?.onError,r),B(t?.handleError,r),r}}async function i(e){if(!u)return;const t=await r;t&&t(e)}return{createOpenDataFrame:function(t){if(!t.template)throw new Error("options.template is required");const s=De(t.el),a=n?.then(()=>e?.WWOpenData?.registerOpenFrame(s)),{subscribe:c,handleMessage:p}=$e(),{invoke:l,dispose:f}=Ue(s,kt,p),d={el:s,data:vt(t.data)||{},setData:async function(e){(function(e,t,n){void 0===n&&(n={});for(var r=n.protectedKeys||mt,o=n.set||yt,i=0,s=Object.keys(t);i<s.length;i++){var a=s[i];if(!Ke(r,a))if(Ke(a,"[")||Ke(a,"."))try{var c=wt(gt(a),r||[]);c?xt(e,c,t[a],o):o(e,a,t[a])}catch(u){o(e,a,t[a])}else o(e,a,t[a])}})(d.data,e,{protectedKeys:At}),await l({type:"update",options:{data:e}})},dispose:function(){f(),a?.then(t=>{e?.WWOpenData?.unregisterOpenFrame(t)})},...t.methods};return Ct.set(d,{frame:d,invoke:l,subscribe:c}),s.src=It,c("init",async()=>({id:u?await a:void 0,hooks:St(t),options:bt({...t,el:void 0,methods:void 0,data:d.data}),config:{support:["injectSession"]}})),c("call",e=>{let n=t;return"method"===e.kind&&(n=n.methods),qe(e,n,d)}),c("injectSession",async()=>{await i(s)}),c("refreshSession",async()=>{r=o(),await i(s)}),c("invokeJsapi",e=>U("wwapp.invokeJsApiByCallInfo",{callInfo:e.callInfo})),c("invokeDownload",e=>{if(!e.url.startsWith("https://open.work.weixin.qq.com/"))throw new Error("Invalid download url");const t=document.createElement("a");t.href=e.url,t.target="_blank",t.style.display="none",t.click()}),c("agentConfig",async()=>{const e=D();return{url:e,params:await Q(e)}}),c("modal",async e=>{const n=u?"wecom-window":void 0;if("function"!=typeof t.handleModal)return{modalType:n};return{modalType:!1===t.handleModal({modalUrl:e.modalUrl,modalSize:e.modalSize})?"iframe":n}}),d}}},exports.createSchoolPayment=function(e){return X("createSchoolPayment",e)},exports.createScrollViewContext=async function(e,t){const{get:n}=Rt(e),r=await n(t);if(r)return qn(r)},exports.createWWLoginPanel=function(e){const{width:t,height:n}=function(e=Bt.middle){const t=Dt[e]||Dt[Bt.middle];return{width:t[0],height:t[1]}}(e.params?.panel_size),r=De(e.el);if(r.setAttribute("allow","local-network-access"),e.params?.redirect_type===Wt.top){(function(){let e;try{e=Pt(window.top?.origin??"")}catch(t){e=Pt(document.referrer)}return e})()!==Pt(e.params?.redirect_uri)&&r.setAttribute("sandbox","allow-top-navigation allow-scripts allow-same-origin")}const{style:o}=r;o.width=t,o.height=n;const{dispose:i}=Ue(r,"https://login.work.weixin.qq.com",t=>{if("call"===t.type)return qe(t,e);throw new Error(`Unknown message type '${t.type}'`)}),s=new URL("https://login.work.weixin.qq.com/wwlogin/sso/login");for(const a of Object.keys(e.params||{}))s.searchParams.set(a,e.params[a]);return s.searchParams.set("version",_t),r.src=s.href,{el:r,unmount(){i(),r.parentNode?.removeChild(r)}}},exports.discoverDevice=function(e){return X("discoverDevice",e)},exports.downloadImage=function(e){return X("downloadImage",e,{serverId:e.serverId,isShowProgressTips:E(e.isShowProgressTips)?0:1})},exports.downloadLivingReplay=function(e){return X("downloadLivingReplay",e)},exports.downloadVoice=function(e){return X("downloadVoice",e,{serverId:e.serverId,isShowProgressTips:E(e.isShowProgressTips)?0:1})},exports.ensureAgentConfigReady=G,exports.ensureConfigReady=function(){const e=x();return u&&e?.getAgentConfigSignature?G():z()},exports.ensureCorpConfigReady=z,exports.enterHWOpenTalk=function(e){return X("enterHWOpenTalk",e)},exports.enterpriseVerify=function(e={}){return X("enterpriseVerify",e)},exports.env=Hn,exports.getApprovalSelectedItems=function(e){return ee(e,async()=>{await Z();const t=await U("getApprovalSelectedItems",{key:e.key});if(!t.selectedData)return t;try{t.selectedData=JSON.parse(t.selectedData)}catch(n){t.selectedData=[]}return t})},exports.getBLEDeviceCharacteristics=function(e){return X("getBLEDeviceCharacteristics",e)},exports.getBLEDeviceServices=function(e){return X("getBLEDeviceServices",e)},exports.getBeacons=function(e={}){return X("getBeacons",e)},exports.getBluetoothAdapterState=function(e={}){return X("getBluetoothAdapterState",e)},exports.getBluetoothDevices=function(e={}){return ee(e,async()=>{await Z();const e=await U("getBluetoothDevices");for(const t of e.devices||[])ne(t);return e})},exports.getCanvas=async function(e,t){const{get:n}=Rt(e),r=await n(t);if(!r)return;if(Un.has(r))return Un.get(r);const o=Fn(r),i=await r.invoke("bind",{refId:o});return i?(Un.has(r)||Un.set(r,new jn(r,o,i)),Un.get(r)):void 0},exports.getClipboardData=function(e={}){return X("getClipboardData",e)},exports.getConnectedBluetoothDevices=function(e){return X("getConnectedBluetoothDevices",e)},exports.getConnectedWifi=function(e={}){return X("getConnectedWifi",e)},exports.getContext=function(e={}){return X("getContext",e)},exports.getCurCorpGroupChat=function(e={}){return X("getCurCorpGroupChat",e)},exports.getCurCorpGroupContact=function(e){return X("getCurCorpGroupContact",e)},exports.getCurExternalChat=function(e={}){return X("getCurExternalChat",e)},exports.getCurExternalContact=function(e={}){return X("getCurExternalContact",e)},exports.getLocalFileData=function(e){return X("getLocalFileData",e)},exports.getLocalImgData=function(e){return X("getLocalImgData",e)},exports.getLocation=function(e={}){return ee(e,async()=>{await Z();const t=await U("geoLocation",{type:e.type||"wgs84"});return delete t.type,t})},exports.getNetworkType=function(e={}){return X("getNetworkType",e)},exports.getNodeInfo=async function(e,t,n){const{get:r}=Rt(e),o=await r(t);if(o)return o.invoke("nodeInfo.get",{fields:n})},exports.getShareInfo=function(e){return X("getShareInfo",e)},exports.getSignature=function(e){let t=e;"string"==typeof e&&(t={ticket:e});const n=t.nonceStr||Ve(),r=t.timestamp||Math.floor(Date.now()/1e3),i=t.url||o().split("#")[0];return{timestamp:r,nonceStr:n,signature:$n(`jsapi_ticket=${t.ticket}&noncestr=${n}&timestamp=${r}&url=${i}`)}},exports.getVerifyParams=S,exports.getWifiList=function(e={}){return X("getWifiList",e)},exports.hideAllNonBaseMenuItem=function(e={}){return X("hideAllNonBaseMenuItem",e)},exports.hideChatAttachmentMenu=function(e){return X("hideChatAttachmentMenu",e)},exports.hideMenuItems=function(e){return X("hideMenuItems",e)},exports.hideOptionMenu=function(e={}){return X("hideOptionMenu",e)},exports.initOpenData=Le,exports.invoke=U,exports.launchMiniprogram=function(e){return X("launchMiniprogram",e,{appid:e.appid,path:we(e.path),envVersion:e.envVersion})},exports.navigateToAddCustomer=function(e={}){return X("navigateToAddCustomer",e)},exports.navigateToKfChat=function(e){return X("navigateToKfChat",e)},exports.notifyBLECharacteristicValueChange=function(e){return X("notifyBLECharacteristicValueChange",e)},exports.on=j,exports.onBLECharacteristicValueChange=function(e){j("onBLECharacteristicValueChange",t=>{"string"==typeof t?.value&&(t.value=W(t.value)),e(t)})},exports.onBLEConnectionStateChange=function(e){j("onBLEConnectionStateChange",e)},exports.onBeaconServiceChange=function(e){j("onBeaconServiceChange",e)},exports.onBeaconUpdate=function(e){j("onBeaconUpdate",e)},exports.onBluetoothAdapterStateChange=function(e){j("onBluetoothAdapterStateChange",e)},exports.onBluetoothDeviceFound=function(e){j("onBluetoothDeviceFound",t=>{for(const e of t.devices||[])ne(e);e(t)})},exports.onGetWifiList=function(e){j("onGetWifiList",e)},exports.onHistoryBack=function(e){j("historyBack",e)},exports.onLocationChange=function(e){j("auto:location:report",e)},exports.onMenuShareAppMessage=function(e){Y("menu:share:appmessage",e,()=>U("sendAppMessage",{title:e.title||i(),desc:e.desc||"",link:e.link||o(),img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||"",finder_feed:e.finderFeed||e.finder_feed,finder_topic:e.finderTopic||e.finder_topic,finder_profile:e.finderProfile||e.finder_profile,enableIdTrans:e.enableIdTrans?1:0}))},exports.onMenuShareQQ=function(e){Y("menu:share:qq",e,()=>U("shareQQ",{title:e.title||i(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||o()}))},exports.onMenuShareQZone=function(e){Y("menu:share:QZone",e,()=>U("shareQZone",{title:e.title||i(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||o()}))},exports.onMenuShareTimeline=function(e){Y("menu:share:timeline",e,()=>U("shareTimeline",{title:e.title||i(),desc:e.title||i(),img_url:e.imgUrl||"",link:e.link||o(),type:e.type||"link",data_url:e.dataUrl||"",enableIdTrans:e.enableIdTrans?1:0}))},exports.onMenuShareWechat=function(e){Y("menu:share:wechat",e,()=>U("shareWechat",{title:e.title||i(),desc:e.desc||"",link:e.link||o(),img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||"",enableIdTrans:e.enableIdTrans?1:0}))},exports.onMenuShareWeibo=function(e){Y("menu:share:weiboApp",e,()=>U("shareWeiboApp",{title:e.title||i(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||o()}))},exports.onNetworkStatusChange=function(e){j("onNetworkStatusChange",e)},exports.onSearchBeacons=function(e){j("onBeaconsInRange",e)},exports.onUserCaptureScreen=function(e){j("onUserCaptureScreen",e)},exports.onVoicePlayEnd=function(e){j("onVoicePlayEnd",e)},exports.onVoiceRecordEnd=function(e){j("onVoiceRecordEnd",e)},exports.onWifiConnected=function(e){j("onWifiConnected",e)},exports.openAddress=function(e={}){return ee(e,async()=>{await Z();const e=await U("editAddress");return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e})},exports.openAppComment=function(e={}){return X("openAppComment",e)},exports.openAppDeviceDataAuth=function(e={}){return X("openAppDeviceDataAuth",e)},exports.openAppManage=function(e={}){return X("openAppManage",e)},exports.openAppPurchase=function(e){return X("openAppPurchase",e)},exports.openBluetoothAdapter=function(e={}){return X("openBluetoothAdapter",e)},exports.openBusinessView=function(e){return ee(e,async()=>{await Z();const t=await U("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion});if(!l||!t.extraData)return t;try{t.extraData=JSON.parse(t.extraData)}catch(n){t.extraData={}}return t})},exports.openCard=function(e){return X("batchViewCard",e,{card_list:e.cardList.map(e=>({card_id:e.cardId,code:e.code}))})},exports.openDefaultBrowser=function(e){return X("openDefaultBrowser",e)},exports.openDeviceProfile=function(e){return X("openDeviceProfile",e)},exports.openEnterpriseChat=function(e={}){return X("openEnterpriseChat",e,{chatId:e.chatId||"",chatname:e.groupName||"",groupName:e.groupName||"",useridlist:N(e.userIds),userIds:N(e.userIds),openIds:N(e.openIds),externalUserIds:N(e.externalUserIds)})},exports.openEnterpriseRedPacket=function(e){return X("getRecevieBizHongBaoRequest",e,de(e))},exports.openExistedChatWithMsg=function(e){return X("openExistedChatWithMsg",e)},exports.openLocation=function(e){return X("openLocation",e,{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""})},exports.openProductSpecificView=function(e){return X("openProductViewWithPid",e,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo})},exports.openThirdAppServiceChat=function(e={}){return X("openThirdAppServiceChat",e)},exports.openUserProfile=function(e){return X("openUserProfile",e)},exports.pauseVoice=function(e){return X("pauseVoice",e)},exports.playVoice=function(e){return X("playVoice",e)},exports.previewFile=function(e){return X("previewFile",e)},exports.previewImage=function(e){return X("imagePreview",e)},exports.printFile=function(e){return X("printFile",e)},exports.queryCurrHWOpenTalk=function(e={}){return X("queryCurrHWOpenTalk",e)},exports.readBLECharacteristicValue=function(e){return X("readBLECharacteristicValue",e)},exports.refundExternalPayment=function(e){return X("refundExternalPayment",e)},exports.register=function(e){!function(e){if(!e.corpId)throw new Error("Missing corpId");g=e}(e),(p||u)&&Z()},exports.replayLiving=function(e){return X("replayLiving",e)},exports.saveApprovalSelectedItems=function(e){return X("saveApprovalSelectedItems",e,{key:e.key,selectedData:"string"==typeof e.selectedData?e.selectedData:JSON.stringify(e.selectedData)})},exports.scanQRCode=function(e={}){return ee(e,async()=>{await Z();const t=await U("scanQRCode",{needResult:e.needResult?1:0,scanType:e.scanType||["qrCode","barCode"]});if(!d)return t;const n=t.resultStr;if(!n)return t;let r;try{r=JSON.parse(n)}catch(o){}return t.resultStr=r?.scan_code?.scan_result,t})},exports.selectCorpGroupContact=function(e){return ee(e,async()=>{await Z();const t=await U("selectCorpGroupContact",e);if(!V(t.result))return t;try{t.result=JSON.parse(t.result)}catch(n){}return t})},exports.selectEnterpriseContact=function(e){return ee(e,async()=>{await Z();const t=await U("selectEnterpriseContact",e);if(!V(t.result))return t;try{t.result=JSON.parse(t.result)}catch(n){}return t})},exports.selectExternalChat=function(e={}){return X("selectExternalChat",e)},exports.selectExternalContact=function(e={}){return X("selectExternalContact",e)},exports.selectPrivilegedContact=function(e){return X("selectPrivilegedContact",e)},exports.sendChatMessage=function(e){return X("sendChatMessage",e)},exports.setClipboardData=function(e){return X("setClipboardData",e)},exports.setKeepScreenOn=function(e){return X("setKeepScreenOn",e)},exports.setShareAttr=function(e={}){return X("setShareAttr",e)},exports.shareAppMessage=function(e){return X("shareAppMessage",e)},exports.shareToExternalChat=function(e){return X("shareToExternalChat",e)},exports.shareToExternalContact=function(e){return X("shareToExternalContact",e)},exports.shareToExternalMoments=function(e){return X("shareToExternalMoments",e)},exports.shareWechatMessage=function(e){return X("shareWechatMessage",e)},exports.showAllNonBaseMenuItem=function(e={}){return X("showAllNonBaseMenuItem",e)},exports.showMenuItems=function(e){return X("showMenuItems",e)},exports.showOptionMenu=function(e={}){return X("showOptionMenu",e)},exports.showSecurityGatewayConfirmModal=function(e){const t=new URL("https://open.work.weixin.qq.com/wwopen/secureGateway/confirm");if(t.searchParams.set("confirm_id",e.confirmId),d||l)return void(location.href=t.href);t.searchParams.set("modal","true");const n=Je(t.href,t=>{switch(t.type){case"call":return qe(t,e);case"close":return;default:throw new Error(`Unknown message type '${t.type}'`)}});return{el:n.el,unmount(){n.dispose(),n.el.parentNode?.removeChild(n.el)}}},exports.startAutoLBS=function(e){return X("startAutoLBS",e)},exports.startBeaconDiscovery=function(e){return X("startBeaconDiscovery",e)},exports.startBluetoothDevicesDiscovery=function(e={}){return X("startBluetoothDevicesDiscovery",e)},exports.startLiving=function(e={}){return X("startLiving",e)},exports.startMeeting=function(e={}){return X("startMeeting",e)},exports.startRecord=function(e={}){return X("startRecord",e)},exports.startSearchBeacons=function(e={}){return X("startMonitoringBeacons",e)},exports.startWecast=function(e={}){return X("startWecast",e)},exports.startWifi=function(e={}){return X("startWifi",e)},exports.stopAutoLBS=function(e={}){return X("stopAutoLBS",e)},exports.stopBeaconDiscovery=function(e={}){return X("stopBeaconDiscovery",e)},exports.stopBluetoothDevicesDiscovery=function(e={}){return X("stopBluetoothDevicesDiscovery",e)},exports.stopRecord=function(e={}){return X("stopRecord",e)},exports.stopSearchBeacons=function(e={}){return X("stopMonitoringBeacons",e)},exports.stopVoice=function(e){return X("stopVoice",e)},exports.stopWifi=function(e={}){return X("stopWifi",e)},exports.thirdPartyOpenPage=function(e){return X("thirdPartyOpenPage",e)},exports.translateVoice=function(e){return X("translateVoice",e,{localId:e.localId,isShowProgressTips:E(e.isShowProgressTips)?0:1})},exports.updateAppMessageShareData=function(e={}){return X("updateAppMessageShareData",e)},exports.updateCorpGroupChat=function(e){return X("updateCorpGroupChat",e)},exports.updateEnterpriseChat=function(e){return X("updateEnterpriseChat",e,{chatId:e.chatId,userIdsToAdd:N(e.userIdsToAdd)})},exports.updateMomentsSetting=function(e){return X("updateMomentsSetting",e)},exports.updateTimelineShareData=function(e={}){return X("updateTimelineShareData",e)},exports.uploadImage=function(e){return X("uploadImage",e,{localId:e.localId,isShowProgressTips:E(e.isShowProgressTips)?0:1})},exports.uploadVoice=function(e){return X("uploadVoice",e,{localId:e.localId,isShowProgressTips:E(e.isShowProgressTips)?0:1})},exports.wedocSelectDoc=function(e){return X("wedocSelectDoc",e)},exports.wedriveSelectDir=function(e={}){return X("wedriveSelectDir",e)},exports.wedriveSelectFile=function(e){return X("wedriveSelectFile",e)},exports.wedriveSelectFileForDownload=function(e){return X("wedriveSelectFileForDownload",e)},exports.wedriveSelectFileForShare=function(e){return X("wedriveSelectFileForShare",e)},exports.writeBLECharacteristicValue=function(e){return X("writeBLECharacteristicValue",e,{deviceId:e.deviceId,serviceId:e.serviceId,characteristicId:e.characteristicId,value:T(e.value)})};
