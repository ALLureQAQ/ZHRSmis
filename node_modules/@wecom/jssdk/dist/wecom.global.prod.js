var ww=function(e){"use strict";const t="undefined"!=typeof window?window:void 0,n="undefined"!=typeof document?document:void 0,r="undefined"!=typeof navigator?navigator:void 0,i="undefined"!=typeof location?location:void 0;function o(){return i?.href||""}function a(){return n?.title||""}const s=r?.userAgent||"",c=r?.platform||"",u=s?.match(/wxwork\/([\d.]+)/i)?.[1],l=!!u,f=!l&&/micromessenger/i.test(s),d=/\bAndroid\b/i.test(s),p=/Win/i.test(c),{isIOS:h,isMac:g}=function(){const e=r?.maxTouchPoints??1,t=/Mac/i.test(c);if(t&&e>2)return{isMac:!1,isIOS:!0};return{isMac:t,isIOS:/\b(iPhone|iPad|iPod)\b/i.test(s)}}();let m,w,y;function v(){return m}function C(){return w?.getResult()?.params}function S(){return y?.getResult()?.params}function b(){const e=v();if(l&&e?.getAgentConfigSignature){const e=S();return e?.corpid}const t=C();return t?.appId}function k(){const e=function(){const e=v();return l&&e?.getAgentConfigSignature?S():C()}();if(!e)return;const t=b();return{appId:t,verifyAppId:t,verifySignType:"sha1",verifyTimestamp:e.timestamp,verifyNonceStr:e.nonceStr,verifySignature:e.signature}}const I={config:"preVerifyJsApi",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareWechat:"menu:share:wechat",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress",getBrandWCPayRequest:"getBrandWCPayRequest"},x={};for(const Zn of Object.keys(I))x[I[Zn]]=Zn;function A(e){return I[e]||e}function _(e){return x[e]||e}function M(e){return e.map(A)}const T=o();function W(e){if("undefined"!=typeof Buffer)return Buffer.from(e).toString("base64");let t="";const n=new Uint8Array(e),r=n.byteLength;for(let i=0;i<r;i++)t+=String.fromCharCode(n[i]);return btoa(t)}function B(e){if("undefined"!=typeof Buffer)return Buffer.from(e,"base64").buffer;const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function L(e,t,n){if(V(e))try{return e.call(n,t)}catch(r){!function(...e){console.error("[wwsdk]",...e)}(r)}}function D(e,t){return e.slice(0,t.length)===t}function P(e){return e?T.split("#")[0]:o().split("#")[0]}function E(e){return N(e)?e.slice(e.indexOf(":")+1):""}function O(e){return!1===e||0===e}function R(e){return!!e&&"object"==typeof e}function V(e){return"function"==typeof e}function N(e){return"string"==typeof e}function j(e){return e?N(e)?e:e.join(";"):e}async function U(n,r){e.isWeixinJSBridgeReady||await e.onWeixinJSBridgeReady,t.WeixinJSBridge.on(n,r)}async function F(n,r={},i){e.isWeixinJSBridgeReady||await e.onWeixinJSBridgeReady;const o=await new Promise(e=>{const i={...r,...k()};t.WeixinJSBridge.invoke(n,i,e)});o.errMsg||(o.errMsg=function(e,t){const n=_(e);if(!t)return`${n}:ok`;let r=E(t);"confirm"===r&&(r="ok");"failed"===r&&(r="fail");D(r,"failed_")&&(r=r.slice(7));D(r,"fail_")&&(r=r.slice(5));r=r.replace(/_/g,"").toLowerCase(),("access denied"===r||"no permission to execute"===r)&&(r="permission denied");"config"===n&&"function not exist"===r&&(r="ok");r||(r="fail");return`${n}:${r}`}(n,o.err_msg||o.errmsg));const a=E(o.errMsg);if(null==o.errCode&&(o.errCode=null!=o.err_code?o.err_code:"ok"===a?0:-1),L(i,o),"ok"!==a&&"yes"!==a)throw o;return o}e.isWeixinJSBridgeReady=!!t?.WeixinJSBridge,e.onWeixinJSBridgeReady=Promise.resolve(),e.isWeixinJSBridgeReady||(e.onWeixinJSBridgeReady=new Promise(t=>{n?.addEventListener("WeixinJSBridgeReady",()=>{e.isWeixinJSBridgeReady=!0,t()})}));class q extends Error{constructor(e){super(`SDK Error: ${e}`)}}class $ extends q{constructor(){super("Aborted")}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class z{checkValid(){return l&&this.url!==P(this.useOriginalURL)&&(this.error=new $),!this.error}getResult(){if(this.checkValid())return this.result}async awaitPromise(e){try{return this.result=await e,this.result}catch(t){throw this.error=t,t}}constructor(e,t){J(this,"type",void 0),J(this,"url",void 0),J(this,"promise",void 0),J(this,"result",void 0),J(this,"error",void 0),J(this,"useOriginalURL",void 0),this.type=e,this.useOriginalURL=f&&!p&&!g&&1===e,this.url=P(this.useOriginalURL),this.promise=this.awaitPromise(t(this.url))}}async function G(){const e=w;if(e?.checkValid())return e.promise;const t=new z(1,async e=>{const n=v();if(!n?.getConfigSignature)throw new q("Missing getConfigSignature");const r=await n.getConfigSignature(e);if(!t.checkValid())throw new $;const i=function(e,t){return{appId:e.corpId,timestamp:`${t.timestamp}`,nonceStr:t.nonceStr,signature:t.signature,jsApiList:M(e.jsApiList||["config"]),openTagList:M(e.openTagList||[])}}(n,r),o=await F("preVerifyJSAPI",{appId:i.appId,verifyJsApiList:i.jsApiList,verifyOpenTagList:i.openTagList,verifyAppId:i.appId,verifySignType:"sha1",verifyTimestamp:i.timestamp,verifyNonceStr:i.nonceStr,verifySignature:i.signature});if(!t.checkValid())throw new $;return{params:i,result:o}});return t.promise.then(e=>{const t=v();L(t?.onConfigSuccess,e.result),L(t?.onConfigComplete,e.result)},e=>{const t=v();L(t?.onConfigFail,e),L(t?.onConfigComplete,e)}),function(e){w=e}(t),t.promise}async function Q(){const e=y;if(e?.checkValid())return e.promise;const t=new z(2,async e=>{let n;l&&function(e,t){const n=e?.split(".")||[],r=t?.split(".")||[];for(let i=0,o=Math.max(n.length,r.length);i<o;i++){const e=parseInt(n[i])||0,t=parseInt(r[i])||0;if(e>t)return 1;if(e<t)return-1}return 0}(u,"3.0.24")<0&&(n=G());const[r]=await Promise.all([H(e),n]);if(!t.checkValid())throw new $;const i=await F("agentConfig",r);if(!t.checkValid())throw new $;return{params:r,result:i}});return t.promise.then(e=>K(e.result),e=>Z(e)),function(e){y=e}(t),t.promise}async function H(e){const t=v();if(!t?.getAgentConfigSignature)throw new q("Missing getAgentConfigSignature");const n=await t.getAgentConfigSignature(e);return{corpid:t.corpId,agentid:`${t.agentId}`,timestamp:`${n.timestamp}`,nonceStr:n.nonceStr,signature:n.signature,jsApiList:M(t.jsApiList||["agentConfig"])}}function K(e){const t=v();L(t?.onAgentConfigSuccess,e),L(t?.onAgentConfigComplete,e)}function Z(e){const t=v();L(t?.onAgentConfigFail,e),L(t?.onAgentConfigComplete,e)}function X(){const e=v();if(e)return l&&e.getAgentConfigSignature?Q():e.getConfigSignature?G():void 0}async function Y(e,t,n=t){return te(t,async()=>(await X(),F(e,n)))}async function ee(e,t,n){await X(),U(e,()=>{te(t,n)})}function te(e,t){return t(e).then(t=>(L(e?.success,t),L(e?.complete,t),t),t=>{throw L("cancel"===E(t.errMsg)?e?.cancel:e?.fail,t),L(e?.complete,t),t})}var ne=function(e){return e.CLProximityUnknown="0",e.CLProximityImmediate="1",e.CLProximityNear="2",e.CLProximityFar="3",e}({});function re(e){if("string"==typeof e.advertisData&&(e.advertisData=B(e.advertisData)),e.serviceDataV2){const t=e.serviceDataV2;for(const e of Object.keys(t))"string"==typeof t[e]&&(t[e]=B(t[e]));e.serviceData=t,delete e.serviceDataV2}}var ie=function(e){return e.wgs84="wgs84",e.gcj02="gcj02",e}({});var oe=function(e){return e.wifi="wifi",e.network2g="2g",e.network3g="3g",e.network4g="4g",e.none="none",e.unknown="unknown",e}({});var ae=function(e){return e.video="video",e.image="image",e.file="file",e.video_and_image="video_and_image",e}({}),se=function(e){return e.video="video",e.image="image",e.file="file",e}({});var ce=function(e){return e.original="original",e.compressed="compressed",e}({}),ue=function(e){return e.album="album",e.camera="camera",e}({}),le=function(e){return e.normal="normal",e.batch="batch",e.front="front",e.batch_front="batch_front",e}({});var fe=function(e){return e[e.common=0]="common",e[e.corp_training=1]="corp_training",e[e.edu_normal_class=2]="edu_normal_class",e[e.edu_small_class=3]="edu_small_class",e}({});var de=function(e){return e[e.other=0]="other",e[e.doc=3]="doc",e[e.sheet=4]="sheet",e[e.form=5]="form",e[e.slide=6]="slide",e[e.mindmap=7]="mindmap",e[e.flowchart=8]="flowchart",e[e.smartsheet=10]="smartsheet",e}({});var pe=function(e){return e[e.normal=0]="normal",e[e.scan=1]="scan",e}({});function he(e){return{timeStamp:`${e.timestamp}`,nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function ge(e){const t={};for(const n of Object.keys(e)){if(!R(e[n])){t[n]=e[n];continue}const r=ge(e[n]);for(const e of Object.keys(r))t[`${n}.${e}`]=r[e]}return t}var me=function(e){return e[e.chat=0]="chat",e[e.qrcode=1]="qrcode",e}({});var we=function(e){return e.contact_profile="contact_profile",e.single_chat_tools="single_chat_tools",e.group_chat_tools="group_chat_tools",e.chat_attachment="chat_attachment",e.single_kf_tools="single_kf_tools",e.chain_single_chat_tools="chain_single_chat_tools",e.chain_group_chat_tools="chain_group_chat_tools",e.internal_group_chat_board="internal_group_chat_board",e.normal="normal",e}({});function ye(e){if(!e||!N(e))return;const[t,...n]=e.split("?");return n.length?`${t}.html?${n.join("?")}`:`${t}.html`}var ve=function(e){return e.permission="permission",e.datazone_permission="datazone_permission",e}({});var Ce=function(e){return e.release="release",e.trial="trial",e.develop="develop",e}({});var Se=function(e){return e[e.internal=1]="internal",e[e.external=2]="external",e}({});var be=function(e){return e[e.mediaid=1]="mediaid",e[e.url=2]="url",e[e.localId=4]="localId",e}({});var ke=function(e){return e.None="None",e.HWOpenTalk="HWOpenTalk",e.VoIP="VoIP",e.SystemCall="SystemCall",e}({});var Ie=function(e){return e.qrCode="qrCode",e.barCode="barCode",e}({});var xe=function(e){return e.single="single",e.multi="multi",e}({}),Ae=function(e){return e.department="department",e.user="user",e}({});var _e=function(e){return e.single="single",e.multi="multi",e}({}),Me=function(e){return e.department="department",e.user="user",e}({});var Te=function(e){return e[e.all=0]="all",e[e.unselected=1]="unselected",e}({});var We=function(e){return e.single="single",e.multi="multi",e}({});var Be=function(e){return e.create_approval="10001",e.view_approval="10002",e}({}),Le=function(e){return e.link="link",e.text="text",e}({});function De(e={}){return te(e,async()=>{if(!l)return async function(){if(!t?.WWOpenData?.agentConfig)throw new q("Missing WWOpenData.agentConfig");const e=await H(P()),n=new Promise((n,r)=>{t.WWOpenData.agentConfig({...e,success:n,fail:r})});return n.then(K,Z),n}();const{result:e}=await Q();if(!p&&!t?.WeixinSandBox)throw new q("Missing WeixinSandBox");if(t?.WWOpenData||await F("wwapp.initWwOpenData"),!t?.WWOpenData)throw new q("Init WWOpenData failed");return t.WWOpenData.initJSSDK&&t.WWOpenData.initJSSDK({invoke:F,ensureAgentConfigReady:Q}),e})}function Pe(e){const t=document.createElement("iframe"),{style:n}=t;n.display="block",n.border="none",n.background="transparent",t.referrerPolicy="origin",t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true");const r=function(e){if("string"==typeof e)return document.querySelector(e);return e}(e);return r&&r.appendChild(t),t}const Ee=Ne();let Oe,Re=0;function Ve(){return`${Ee}-${Re++}`}function Ne(){return Math.random().toString(36).slice(2)}function je(e){return e&&"object"==typeof e?{...e,message:e.message,stack:e.stack}:e}function Ue(e){try{return"string"==typeof e?JSON.parse(e):e}catch(t){}}function Fe(e,t,n){const r=[];let i=!1,o=!1;function a(n){if(n.origin!==t||e.contentWindow!==n.source)return;const r=Ue(n.data);"string"==typeof r?.type&&r.type.startsWith("ww-iframe-handle:")&&f(r,n)}window.addEventListener("message",a);const s=new MessageChannel;s.port1.onmessage=e=>{f(Ue(e.data),e)};const{invoke:c,handleCallMessage:u,handleResponseMessage:l}=function(e,t){const n=new Map;return{invoke:function(t,r){return r?.dropResult?(e({type:"ww-iframe-handle:call",args:t},r),Promise.resolve(void 0)):new Promise((i,o)=>{const a=Ve();n.set(a,{resolve:i,reject:o}),e({type:"ww-iframe-handle:call",uid:a,args:t},r)})},handleCallMessage:async function(n,r){if(!n.uid)return t(n.args,r);try{e({type:"ww-iframe-handle:response",uid:n.uid,kind:"resolve",args:await t(n.args,r)})}catch(i){throw e({type:"ww-iframe-handle:response",uid:n.uid,kind:"reject",args:je(i)}),i}},handleResponseMessage:function(e){const t=n.get(e.uid);t&&(t[e.kind](e.args),n.delete(e.uid))}}}(function(e,t){i?d(e,t):r.push({msg:e,opts:t})},n);function f(e,t){switch(e.type){case"ww-iframe-handle:ready":return function(e){if(i)return;i=!0,e.supportChannel&&(d({type:"ww-iframe-handle:set-port",port:s.port2},{transfer:[s.port2],serialize:!1}),o=!0);for(const t of r)d(t.msg,t.opts)}(e);case"ww-iframe-handle:call":return u(e,t);case"ww-iframe-handle:response":return void l(e)}}function d(n,r){const i=!1===r?.serialize?n:JSON.stringify(n);o?s.port1.postMessage(i,r?.transfer):e.contentWindow?.postMessage(i,t,r?.transfer)}return e.addEventListener("load",()=>{i||d({type:"ww-iframe-handle:init"})}),{el:e,invoke:c,dispose:function(){window.removeEventListener("message",a),s.port1.onmessage=null}}}function qe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $e(e,t,n){L(t[e.name],e.payload||e.data,n)}function Je(){const e=new Map;return{subscribe:function(t,n){e.set(t,n)},handleMessage:function(t){return e.get(t.type)?.(t)}}}function ze(e,t){Oe?.();const n=Pe(document.body),{style:r}=n;r.position="fixed",r.left="0",r.top="0",r.zIndex="1000",r.width="100vw",r.height="100vh",n.classList.add("wecom-jssdk-modal"),n.setAttribute("src",e);const{origin:i}=new URL(e),o=Fe(n,i,e=>("close"===e.type&&a(),t?.(e)));function a(){o.dispose(),n.parentNode?.removeChild(n)}return Oe=a,o}const Ge={agentConfig:H,suiteConfig:async function(e){const t=v();if(!t?.getSuiteConfigSignature)throw new q("Missing getSuiteConfigSignature");const n=await t.getSuiteConfigSignature(e);return{suiteid:t.suiteId,timestamp:`${n.timestamp}`,nonceStr:n.nonceStr,signature:n.signature,jsApiList:M(t.jsApiList||["agentConfig"])}}};async function Qe(e,t){let n=new Error("Missing signature handler");for(const i of t)try{if(!qe(Ge,i))continue;return{type:i,params:await Ge[i](e)}}catch(r){n=r}throw n}function He(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ke(e){return"object"==typeof e&&null!==e}function Ze(e,t){return!!e&&e.indexOf(t)>=0}var Xe=et("Identifier","name"),Ye=et("Literal","value");function et(e,t){return function(n){var r;return(r={type:e})[t]=n,r}}function tt(e){return ot(e,65,90)||ot(e,97,122)||36===e||95===e}function nt(e){return tt(e)||rt(e)}function rt(e){return ot(e,48,57)}function it(e){return rt(e)||ot(e,65,70)||ot(e,97,102)}function ot(e,t,n){return e>=t&&e<=n}for(var at={null:null,true:!0,false:!1,NaN:NaN,Infinity:1/0},st="await break case catch class const continue debugger default delete do else enum export extends false finally for function if import in instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),ct={},ut=0,lt=st;ut<lt.length;ut++){ct[lt[ut]]=!0}function ft(e){tt(e.peek())||e.unexpected();var t=e.index;do{e.next()}while(nt(e.peek()));return e.expr.slice(t,e.index)}var dt={n:"\n",r:"\r",t:"\t"};function pt(e){var t=e.peek();return rt(t)||46===t?function(e){for(var t="";rt(e.peek());)t+=e.nextCh();if("0"===t){if(e.eat(120)||e.eat(88)){for(t="";it(e.peek());)t+=e.nextCh();return t||e.unexpected(),e.build(Ye(parseInt(t,16)))}if(e.eat(98)||e.eat(66)){for(t="";48===e.peek()||49===e.peek();)t+=e.nextCh();return t||e.unexpected(),e.build(Ye(parseInt(t,2)))}}if(46===e.peek())for(t+=e.nextCh();rt(e.peek());)t+=e.nextCh();if(101===e.peek()||69===e.peek()){t+=e.nextCh(),43!==e.peek()&&45!==e.peek()||(t+=e.nextCh());for(var n=!1;rt(e.peek());)n=!0,t+=e.nextCh();n||e.unexpected()}return tt(e.peek())&&e.throw("Variable name cannot start with a number (".concat(t).concat(e.peekCh(),").")),46!==e.peek()&&"."!==t||e.unexpected(),e.build(Ye(parseFloat(t)))}(e):39===t||34===t?function(e){for(var t,n=e.nextCh(),r="";t=e.nextCh();){if(t===n)return e.build(Ye(r));"\\"===t?(t=e.nextCh(),He(dt,t)?r+=dt[t]:r+=t):r+=t}e.unexpected()}(e):tt(t)?function(e){var t=ft(e);return He(at,t)?e.build(Ye(at[t])):(He(ct,t)&&e.unexpected(t),e.build(Xe(t)))}(e):void e.unexpected()}function ht(e,t,n){var r;return void 0===n&&(n=!1),n?(e.expect(91),r=gt(e),e.expect(93)):r=function(e){var t=ft(e);return e.build(Xe(t))}(e),e.build({type:"MemberExpression",object:t,property:r,computed:n})}function gt(e){return function(e){for(var t,n=pt(e);t=e.peek();)if(91!==t){if(!e.eat(46))break;n=ht(e,n)}else n=ht(e,n,!0);return n}(e)}function mt(e){var t,n={expr:t=e.trim(),index:0,peek:function(){return this.expr.charCodeAt(this.index)},peekCh:function(){return this.expr.charAt(this.index)},next:function(){this.index+=1},nextCh:function(){return this.index+=1,this.expr.charAt(this.index-1)},eat:function(e){return this.peek()===e&&(this.next(),this.skipWhitespace(),!0)},expect:function(e){this.eat(e)||this.unexpected()},skip:function(e){this.index+=e,this.skipWhitespace()},skipWhitespace:function(){for(var e=t.charCodeAt(this.index);32===e||9===e||13===e||10===e;)this.index+=1,e=t.charCodeAt(this.index);return this.index},build:function(e){return this.skipWhitespace(),e},unexpected:function(e){if(!e&&this.index>=t.length)throw this.throw("Unexpected end of input.");throw this.throw("Unexpected token '".concat(e||this.peekCh(),"'."))},throw:function(e){throw new SyntaxError("".concat(e," (1:").concat(this.index,")"))}},r=gt(n);return n.index!==n.expr.length&&n.unexpected(),r}var wt=["constrcutor","prototype","__proto__"];function yt(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),"Identifier"===e.type)return n.unshift(e.name),n;if("MemberExpression"===e.type){var r=e.object,i=e.property;if(e.computed){if("Literal"!==i.type)return;var o=i.value;if(Ze(t,o))return;n.unshift(o)}else{if("Identifier"!==i.type)return;var a=i.name;if(Ze(t,a))return;n.unshift(a)}return yt(r,t,n)}}function vt(e,t,n,r){for(var i=e,o=0,a=t.length-1;o<a;o++){var s=t[o];He(i,s)&&Ke(i[s])||r(i,s,"string"==typeof t[o+1]?{}:[]),i=i[s]}return r(i,t[t.length-1],n),i}function Ct(e,t,n){e[t]=n}function St(e){if(Array.isArray(e))return e.map(St);if(null==e||"object"!=typeof e)return e;const t={};for(const n of Object.keys(e))t[n]=St(e[n]);return t}const bt=new WeakMap;function kt(e){return Object.keys(e).filter(t=>"function"==typeof e[t])}function It(e){return Object.entries(e).reduce((e,[t,n])=>("function"!=typeof n&&(e[t]=n),e),{})}const xt="https://open.work.weixin.qq.com",At=`${xt}/wwopen/ww-open-data-frame`,_t=["constructor","prototype","__proto__","__ob__"];const Mt="2.3.3";var Tt=function(e){return e.serviceApp="ServiceApp",e.corpApp="CorpApp",e}({}),Wt=function(e){return e.zh="zh",e.en="en",e}({}),Bt=function(e){return e.top="top",e.callback="callback",e.self="self",e}({}),Lt=function(e){return e.middle="middle",e.small="small",e}({}),Dt=function(e){return e.Light="light",e.Dark="dark",e.Auto="auto",e}({});const Pt={[Lt.middle]:["480px","416px"],[Lt.small]:["320px","380px"]};function Et(e=""){try{return new URL(e)?.origin}catch(t){return""}}function Ot(e){const t=new WeakMap;return(n,...r)=>(t.has(n)||t.set(n,e(n,...r)),t.get(n))}function Rt(e){return Ot(t=>{const n=function(e){return bt.get(e)}(t);if(!n)throw new TypeError("Illegal invocation");return e(n)})}const Vt=Rt(({frame:e,invoke:t,subscribe:n})=>{const r=new Map,i=new Map;return n("ref.event",e=>{const t=i.get(e.refId);if(t)for(const n of t)n(e.data)}),n("refDispose",e=>{r.delete(e.refId),i.delete(e.refId)}),{get:async function(n){const o=await t({type:"ref.get",name:n});if(!o)return;const a=r.get(o.refId)?.deref();if(a)return a;const s=function(n){i.has(n)||i.set(n,[]);const r=i.get(n);function o(e,r,i){return t({type:"ref.call",refId:n,name:e,data:r},i)}function a(e){return r.push(e),()=>{const t=r.indexOf(e);t>=0&&r.splice(t,1)}}return{frame:e,invoke:o,subscribe:a}}(o.refId);var c;return r.set(o.refId,(c=s,"undefined"!=typeof WeakRef?new WeakRef(c):{deref:()=>c})),s}}});function Nt(e){return"function"==typeof Symbol?Symbol(e):e}class jt{concat(){if(1===this.list.length)return Ut(this.current);const e=new Uint8Array(this.list.reduce((e,t)=>e+t.offset,0));return this.list.reduce((t,n)=>(e.set(new Uint8Array(Ut(n)),t),t+n.offset),0),e.buffer}ensureCapacity(e){const t=this.current,n=t.offset+e;if(n<=t.size)return;const r=t.buffer;!r.resizable||n>r.maxByteLength?(this.current=this.createBufferItem(),this.list.push(this.current)):(t.size=Math.min(2*t.size,r.maxByteLength),r.resize(t.size))}createBufferItem(){const e=new ArrayBuffer(65536,{maxByteLength:1048576});return{view:new DataView(e),buffer:e,size:e.byteLength,offset:0}}constructor(){J(this,"list",void 0),J(this,"current",void 0),this.current=this.createBufferItem(),this.list=[this.current]}}function Ut(e){return e.offset>=e.size?e.buffer:e.buffer.resizable&&e.buffer.transfer?e.buffer.transfer(e.offset):e.buffer.slice(0,e.offset)}const Ft=-Math.pow(2,31),qt=Math.pow(2,31);function $t(){return{buffer:new jt,values:[],stringIndexMap:new Map}}function Jt(e,t){e.buffer.ensureCapacity(1);const n=e.buffer.current;n.view.setUint8(n.offset,t),n.offset+=1}function zt(e,t){e.buffer.ensureCapacity(4);const n=e.buffer.current;n.view.setUint32(n.offset,t),n.offset+=4}function Gt(e,t){let n=e.stringIndexMap.get(t);n||(n=e.values.push(t),e.stringIndexMap.set(t,n)),zt(e,n-1)}function Qt(e,t){if(null!==t)switch(typeof t){case"number":if(function(e){if(!Number.isInteger(e))return!1;return Ft<=e&&e<qt}(t)){Jt(e,1),function(e,t){e.buffer.ensureCapacity(4);const n=e.buffer.current;n.view.setInt32(n.offset,t),n.offset+=4}(e,t);break}Jt(e,2),function(e,t){e.buffer.ensureCapacity(8);const n=e.buffer.current;n.view.setFloat64(n.offset,t),n.offset+=8}(e,t);break;case"string":Jt(e,6),Gt(e,t);break;case"boolean":Jt(e,3),Jt(e,t?1:0);break;case"undefined":Jt(e,5);break;default:Jt(e,6),function(e,t){zt(e,e.values.push(t)-1)}(e,t)}else Jt(e,4)}const Ht=Nt("__WECOM_REFLECT_ID__"),Kt=Rt(({invoke:e})=>{const t="function"==typeof FinalizationRegistry?new FinalizationRegistry(function(e){Jt(a,3),zt(a,e),c()}):null,n=new WeakSet;let r=1;const i=Promise.resolve();let o=!1,a=$t();function s(e){n.has(e)?(Jt(a,2),zt(a,e[Ht])):(Jt(a,1),Qt(a,e))}function c(){o||(o=!0,i.then(u))}function u(){o=!1;const t={buffer:(n=a).buffer.concat(),values:n.values};var n;a=$t(),e({type:"reflect.command",commands:t},{serialize:!1,dropResult:!0,transfer:[t.buffer]})}function l(){return r++}return{genReflectId:l,bind:function(e,r=l()){return n.has(e)?e[Ht]:(e[Ht]=r,n.add(e),t?.register(e,r),r)},set:function(e,t,n){const r=e[Ht];if(!r)throw new TypeError("Illegal invocation");Jt(a,1),zt(a,r),Gt(a,t),s(n),c()},call:function(e,t,n,r){const i=e[Ht];if(!i)throw new TypeError("Illegal invocation");Jt(a,2),zt(a,i),Gt(a,t),zt(a,(r?r[Ht]:0)??0),zt(a,n.length),n.forEach(s),c()}}});function Zt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Xt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Zt(e,t,"get"))}function Yt(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function en(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Zt(e,t,"set"),n),n}const tn=new WeakMap,nn=new WeakMap;function rn(e,t){tn.set(e,t),nn.set(t,e)}function on(e){return tn.has(e)?tn.get(e):e}function an(e){return nn.has(e)?nn.get(e):e}let sn=null;var cn=new WeakMap,un=new WeakMap,ln=new WeakMap;let fn=Ht;class dn{get src(){return Xt(this,cn)}get loading(){return!Xt(this,un)}get complete(){return Xt(this,un)}get error(){return Xt(this,ln)}__handleSettled(e){en(this,un,!0),en(this,ln,e),e?L(this.onerror,e):L(this.onload,void 0)}constructor(e){J(this,fn,void 0),J(this,"onload",void 0),J(this,"onerror",void 0),Yt(this,cn,{writable:!0,value:void 0}),Yt(this,un,{writable:!0,value:!1}),Yt(this,ln,{writable:!0,value:void 0}),en(this,cn,e),rn(this,(sn||(sn=new Image,sn.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),sn))}}const pn=Rt(({frame:e,invoke:t,subscribe:n})=>{const r=Kt(e),i=new Map;function o(e,t){return"string"==typeof e?{type:"url",src:e}:{type:"arraybuffer",data:e,mime:t}}return n("image.settled",e=>{const t=i.get(e.refId);i.delete(e.refId),t&&t(e)}),{createImage:function(e,n){const a=new dn(e),s=r.bind(a);return t({type:"image.load",refId:s,data:o(e,n)},{serialize:"string"==typeof e}),i.set(s,e=>{a.__handleSettled(e.error)}),a}}}),hn=Ot(e=>{const t=new Map;return e.subscribe(e=>{if("event.trigger"!==e.type)return;const n=t.get(`${e.capture}|${e.name}`);if(!n?.size)return;const r=function(e){const t=new CustomEvent(e.type,{detail:e.detail});for(const n of Object.keys(e))n in t||(t[n]=e[n]);return Object.defineProperties(t,{target:{value:e.target},currentTarget:{value:e.currentTarget}}),t}(e.event);for(const t of Array.from(n))L(t,r)}),{addListener:function(n,r,i){const o="boolean"==typeof i?i:!!i?.capture;t.has(`${o}|${n}`)||t.set(`${o}|${n}`,new Set);const a=t.get(`${o}|${n}`);a.size||e.invoke("event.subscribe",{name:n,capture:o}),a.add(r)},removeListener:function(n,r,i){const o="boolean"==typeof i?i:!!i?.capture;if(!t.has(`${o}|${n}`))return;const a=t.get(`${o}|${n}`);a.delete(r),a.size||e.invoke("event.unsubscribe",{name:n,capture:o})}}});var gn=new WeakMap,mn=new WeakMap;let wn=Ht;var yn=new WeakMap,vn=new WeakMap;let Cn=Ht;class Sn{addColorStop(e,t){Xt(this,vn).addColorStop(e,t),Xt(this,yn).call(this,"addColorStop",[e,t])}constructor(e,t){J(this,Cn,void 0),Yt(this,yn,{writable:!0,value:void 0}),Yt(this,vn,{writable:!0,value:void 0}),en(this,yn,e),en(this,vn,t),e.bind(this),rn(this,t)}}const bn=["fillStyle","filter","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle"],kn=["direction","font","fontKerning","fontStretch","fontVariantCaps","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","textAlign","textBaseline","textRendering","wordSpacing"],In=["arc","arcTo","beginPath","bezierCurveTo","clip","closePath","ellipse","lineTo","moveTo","quadraticCurveTo","rect","reset","resetTransform","restore","rotate","roundRect","save","scale","setLineDash","setTransform","transform","translate"],xn=["clearRect","drawFocusIfNeeded","drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],An=["getContextAttributes","getLineDash","getTransform","isContextLost","isPointInPath","isPointInStroke","measureText"],_n=[["createConicGradient",Sn],["createLinearGradient",Sn],["createPattern",class{setTransform(e){Xt(this,mn).setTransform(e),Xt(this,gn).call(this,"setTransform",[e])}constructor(e,t){J(this,wn,void 0),Yt(this,gn,{writable:!0,value:void 0}),Yt(this,mn,{writable:!0,value:void 0}),en(this,gn,e),en(this,mn,t),e.bind(this),rn(this,t)}}],["createRadialGradient",Sn]],Mn=Nt("__WECOM_INTERNAL__"),Tn=Ot((e,t,n)=>new Ln(e,t,n));let Wn=Mn,Bn=Ht;class Ln{constructor(e,t,n){J(this,"canvas",void 0),J(this,Wn,void 0),J(this,Bn,void 0),this.canvas=e,this[Mn]={store:t,native:n,props:Object.create(null)},t.bind(this),rn(this,n)}}const Dn=Ln.prototype;for(const Zn of bn)Object.defineProperty(Dn,Zn,{configurable:!0,enumerable:!0,get(){const{native:e,props:t}=this[Mn];return t[Zn]??an(e[Zn])},set(e){const{store:t,props:n}=this[Mn];n[Zn]=on(e),t.set(this,Zn,e)}});for(const Zn of kn)Object.defineProperty(Dn,Zn,{configurable:!0,enumerable:!0,get(){return an(this[Mn].native[Zn])},set(e){const{store:t,native:n}=this[Mn];n[Zn]=on(e),t.set(this,Zn,e)}});for(const Zn of An)Dn[Zn]=function(...e){const{native:t}=this[Mn];return Pn(t,Zn,e)};for(const Zn of In)Dn[Zn]=function(...e){const{store:t,native:n}=this[Mn];Pn(n,Zn,e),t.call(this,Zn,e)};for(const Zn of xn)Dn[Zn]=function(...e){const{store:t}=this[Mn];t.call(this,Zn,e)};for(const[Zn,Xn]of _n)Dn[Zn]=function(...e){const{store:t,native:n}=this[Mn],r=Pn(n,Zn,e),i=new Xn(t,r);return t.call(this,Zn,e,i),i};function Pn(e,t,n){switch(n.length){case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4]);case 6:return e[t](n[0],n[1],n[2],n[3],n[4],n[5]);default:return e[t](...n)}}var En=new WeakMap,On=new WeakMap,Rn=new WeakMap,Vn=new WeakMap,Nn=new WeakMap;let jn=Ht;class Un{get width(){return Xt(this,En).width}set width(e){Xt(this,En).width=e,Xt(this,On).set(this,"width",e)}get height(){return Xt(this,En).height}set height(e){Xt(this,En).height=e,Xt(this,On).set(this,"height",e)}createImage(e,t){return Xt(this,Rn).createImage(e,t)}getContext(e,t){if("2d"!==e)throw new Error(`Failed to execute 'getContext' on 'FrameCanvas': The provided value '${e}' is not a valid enum value of type RenderingContextType`);if(Xt(this,Nn))return Xt(this,Nn);const n=Xt(this,En).getContext(e,t);return en(this,Nn,Tn(this,Xt(this,On),n)),Xt(this,On).call(this,"getContext",[e,t],Xt(this,Nn)),Xt(this,Nn)}addEventListener(e,t,n){Xt(this,Vn).addListener(e,t,n)}removeEventListener(e,t,n){Xt(this,Vn).removeListener(e,t,n)}constructor(e,t,n){J(this,jn,void 0),Yt(this,En,{writable:!0,value:void 0}),Yt(this,On,{writable:!0,value:void 0}),Yt(this,Rn,{writable:!0,value:void 0}),Yt(this,Vn,{writable:!0,value:void 0}),Yt(this,Nn,{writable:!0,value:void 0}),en(this,En,new OffscreenCanvas(n.width,n.height)),en(this,On,Kt(e.frame)),Xt(this,On).bind(this,t),en(this,Rn,pn(e.frame)),en(this,Vn,hn(e)),rn(this,Xt(this,En))}}const Fn=new WeakMap,qn=Ot(e=>{const{genReflectId:t}=Kt(e.frame);return t()});const $n=Ot(e=>({scrollTo(t){e.invoke("scrollTo",t)},scrollIntoView(t,n){e.invoke("scrollIntoView",{selector:t,options:n})}}));function Jn(e){return function(e){const t="0123456789abcdef";let n,r="";for(let i=0;i<e.length;i++)n=e.charCodeAt(i),r+=t.charAt(n>>>4&15)+t.charAt(15&n);return r}(function(e){return function(e){let t="";for(let n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;const n=new Array(80);let r=1732584193,i=-271733879,o=-1732584194,a=271733878,s=-1009589776;for(let c=0;c<e.length;c+=16){const t=r,u=i,l=o,f=a,d=s;for(let p=0;p<80;p++){n[p]=p<16?e[c+p]:Hn(n[p-3]^n[p-8]^n[p-14]^n[p-16],1);const t=Qn(Qn(Hn(r,5),zn(p,i,o,a)),Qn(Qn(s,n[p]),Gn(p)));s=a,a=o,o=Hn(i,30),i=r,r=t}r=Qn(r,t),i=Qn(i,u),o=Qn(o,l),a=Qn(a,f),s=Qn(s,d)}return[r,i,o,a,s]}(function(e){const t=new Array(e.length>>2);for(let n=0;n<t.length;n++)t[n]=0;for(let n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e),8*e.length))}(e))}function zn(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function Gn(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function Qn(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Hn(e,t){return e<<t|e>>>32-t}const Kn={isWeChat:f,isWeCom:l};return e.CameraMode=le,e.ChooseMessageFileType=ae,e.ColorScheme=Dt,e.CreateExternalPaymentType=me,e.EntryType=we,e.EnvVersion=Ce,e.FrameCanvas=Un,e.IS_WECOM_SDK=!0,e.InTalkType=ke,e.InputCorpGroupContactMode=xe,e.InputCorpGroupContactType=Ae,e.LiveType=fe,e.LocationType=ie,e.NetworkType=oe,e.OAType=Be,e.OaExtDataType=Le,e.OpenAppManagePageType=ve,e.OpenUserProfileType=Se,e.PrintFileIdType=be,e.ProductViewType=pe,e.Proximity=ne,e.SDK_VERSION=Mt,e.ScanQRCodeType=Ie,e.SelectEnterpriseContactMode=_e,e.SelectEnterpriseContactType=Me,e.SelectExternalContactType=Te,e.SelectPrivilegedContactMode=We,e.SizeType=ce,e.SourceType=ue,e.TempFileType=se,e.WWLoginLangType=Wt,e.WWLoginPanelSizeType=Lt,e.WWLoginRedirectType=Bt,e.WWLoginType=Tt,e.WedocSelectedFileType=de,e.addCard=function(e){return te(e,async()=>{await X();const t=await F("batchAddCard",{card_list:e.cardList.map(e=>({card_id:e.cardId,card_ext:e.cardExt}))});if(!t.card_list)return t;for(const e of t.card_list)e.cardId=e.card_id,delete e.card_id,e.cardExt=e.card_ext,delete e.card_ext,e.isSuccess=!!e.is_succ,delete e.is_succ;return t.cardList=t.card_list,delete t.card_list,t})},e.addDevice=function(e){return Y("addDevice",e)},e.checkJsApi=async function(e){return te(e,async()=>{await X();const t=await F("checkJsApi",{jsApiList:M(e.jsApiList)});if("string"==typeof t.checkResult)try{t.checkResult=JSON.parse(t.checkResult)}catch(n){t.checkResult={}}return t.checkResult=function(e){const t={...e};for(const n of Object.keys(e))t[_(n)]=e[n];return t}(ge(t.checkResult)),t})},e.checkSchedule=function(e){return Y("checkSchedule",e)},e.chooseCard=function(e){return te(e,async()=>{await X();const t=await F("chooseCard",{app_id:b(),location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:`${e.timestamp}`,nonce_str:e.nonceStr});return t.cardList=t.choose_card_info,delete t.choose_card_info,t})},e.chooseImage=function(e={}){return te(e,async()=>{await X();const t=await F("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"],defaultCameraMode:e.defaultCameraMode||"normal",isSaveToAlbum:O(e.isSaveToAlbum)?0:1});if(d&&t.localIds){t.localIds=t.localIds||"[]";try{t.localIds=JSON.parse(t.localIds)}catch(n){}}return t})},e.chooseInvoice=function(e){return Y("chooseInvoice",e)},e.chooseMessageFile=function(e){return Y("chooseMessageFile",e)},e.chooseWXPay=function(e){return Y("getBrandWCPayRequest",e,he(e))},e.claimClassAdmin=function(e={}){return Y("claimClassAdmin",e)},e.closeBLEConnection=function(e){return Y("closeBLEConnection",e)},e.closeBluetoothAdapter=function(e={}){return Y("closeBluetoothAdapter",e)},e.closeWindow=function(e={}){return Y("closeWindow",e)},e.connectWifi=function(e){return Y("connectWifi",e)},e.consumeAndShareCard=function(e){return Y("consumedShareCard",e,{consumedCardId:e.cardId,consumedCode:e.code})},e.createBLEConnection=function(e){return Y("createBLEConnection",e)},e.createChatWithMsg=function(e){return Y("createChatWithMsg",e)},e.createCorpGroupChat=function(e){return Y("createCorpGroupChat",e,{groupName:e.groupName||"",userIds:e.userIds,openUserIds:e.openUserIds,externalUserIds:e.externalUserIds,corpGroupUserIds:e.corpGroupUserIds})},e.createDoc=function(e){return Y("createDoc",e)},e.createExternalPayment=function(e={}){return Y("createExternalPayment",e)},e.createJSAPIPanel=function(e,t){const n=Pe(t.el),{style:r}=n;r.width="100%",r.height="100%";const i=new Map,{subscribe:o,handleMessage:a}=Je(),{dispose:s}=Fe(n,"https://login.work.weixin.qq.com",a);return o("call",e=>{$e(e,t)}),o("getStaticOptions",()=>({name:e,options:{...t,el:void 0,params:void 0}})),o("jsapiCallback",e=>{if(!i.has(e.seq))return;const t=i.get(e.seq);i.delete(e.seq),L("success"===e.kind?t?.success:t?.fail,e.payload),L(t?.complete,e.payload)}),o("getJSAPIParams",async n=>{const r=V(t.params)?await t.params():t.params,o=P();return i.set(n.seq,r),{webToken:t.webToken,url:o,configParams:n.payload?.skipSignature?void 0:await Qe(o,n.payload?.preferSignatureTypeList||["agentConfig"]),jsapi:e,jsapiParams:r}}),o("openModalFrame",e=>{ze(e.payload.url)}),n.style.opacity="0",n.src="https://login.work.weixin.qq.com/wwopen/ww-jsapi-transparent-frame",{el:n,unmount(){s(),n.parentNode?.removeChild(n)}}},e.createOpenDataFrameFactory=function(e){const n=l?De():void 0;let r=i();async function i(){if(l)try{return await n,function(e){return new Promise((n,r)=>{t.WWOpenData.createOpenSessionInjector(e,(e,t)=>{e||!t?r(e||new Error("System error")):n(t)})})}({url:At})}catch(r){throw L(e?.onError,r),L(e?.handleError,r),r}}async function o(e){if(!l)return;const t=await r;t&&t(e)}return{createOpenDataFrame:function(e){if(!e.template)throw new Error("options.template is required");const a=Pe(e.el),s=n?.then(()=>t?.WWOpenData?.registerOpenFrame(a)),{subscribe:c,handleMessage:u}=Je(),{invoke:f,dispose:d}=Fe(a,xt,u),p={el:a,data:St(e.data)||{},setData:async function(e){(function(e,t,n){void 0===n&&(n={});for(var r=n.protectedKeys||wt,i=n.set||Ct,o=0,a=Object.keys(t);o<a.length;o++){var s=a[o];if(!Ze(r,s))if(Ze(s,"[")||Ze(s,"."))try{var c=yt(mt(s),r||[]);c?vt(e,c,t[s],i):i(e,s,t[s])}catch(u){i(e,s,t[s])}else i(e,s,t[s])}})(p.data,e,{protectedKeys:_t}),await f({type:"update",options:{data:e}})},dispose:function(){d(),s?.then(e=>{t?.WWOpenData?.unregisterOpenFrame(e)})},...e.methods};return bt.set(p,{frame:p,invoke:f,subscribe:c}),a.src=At,c("init",async()=>({id:l?await s:void 0,hooks:kt(e),options:It({...e,el:void 0,methods:void 0,data:p.data}),config:{support:["injectSession"]}})),c("call",t=>{let n=e;return"method"===t.kind&&(n=n.methods),$e(t,n,p)}),c("injectSession",async()=>{await o(a)}),c("refreshSession",async()=>{r=i(),await o(a)}),c("invokeJsapi",e=>F("wwapp.invokeJsApiByCallInfo",{callInfo:e.callInfo})),c("invokeDownload",e=>{if(!e.url.startsWith("https://open.work.weixin.qq.com/"))throw new Error("Invalid download url");const t=document.createElement("a");t.href=e.url,t.target="_blank",t.style.display="none",t.click()}),c("agentConfig",async()=>{const e=P();return{url:e,params:await H(e)}}),c("modal",async t=>{const n=l?"wecom-window":void 0;if("function"!=typeof e.handleModal)return{modalType:n};return{modalType:!1===e.handleModal({modalUrl:t.modalUrl,modalSize:t.modalSize})?"iframe":n}}),p}}},e.createSchoolPayment=function(e){return Y("createSchoolPayment",e)},e.createScrollViewContext=async function(e,t){const{get:n}=Vt(e),r=await n(t);if(r)return $n(r)},e.createWWLoginPanel=function(e){const{width:t,height:n}=function(e=Lt.middle){const t=Pt[e]||Pt[Lt.middle];return{width:t[0],height:t[1]}}(e.params?.panel_size),r=Pe(e.el);if(r.setAttribute("allow","local-network-access"),e.params?.redirect_type===Bt.top){(function(){let e;try{e=Et(window.top?.origin??"")}catch(t){e=Et(document.referrer)}return e})()!==Et(e.params?.redirect_uri)&&r.setAttribute("sandbox","allow-top-navigation allow-scripts allow-same-origin")}const{style:i}=r;i.width=t,i.height=n;const{dispose:o}=Fe(r,"https://login.work.weixin.qq.com",t=>{if("call"===t.type)return $e(t,e);throw new Error(`Unknown message type '${t.type}'`)}),a=new URL("https://login.work.weixin.qq.com/wwlogin/sso/login");for(const s of Object.keys(e.params||{}))a.searchParams.set(s,e.params[s]);return a.searchParams.set("version",Mt),r.src=a.href,{el:r,unmount(){o(),r.parentNode?.removeChild(r)}}},e.discoverDevice=function(e){return Y("discoverDevice",e)},e.downloadImage=function(e){return Y("downloadImage",e,{serverId:e.serverId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.downloadLivingReplay=function(e){return Y("downloadLivingReplay",e)},e.downloadVoice=function(e){return Y("downloadVoice",e,{serverId:e.serverId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.ensureAgentConfigReady=Q,e.ensureConfigReady=function(){const e=v();return l&&e?.getAgentConfigSignature?Q():G()},e.ensureCorpConfigReady=G,e.enterHWOpenTalk=function(e){return Y("enterHWOpenTalk",e)},e.enterpriseVerify=function(e={}){return Y("enterpriseVerify",e)},e.env=Kn,e.getApprovalSelectedItems=function(e){return te(e,async()=>{await X();const t=await F("getApprovalSelectedItems",{key:e.key});if(!t.selectedData)return t;try{t.selectedData=JSON.parse(t.selectedData)}catch(n){t.selectedData=[]}return t})},e.getBLEDeviceCharacteristics=function(e){return Y("getBLEDeviceCharacteristics",e)},e.getBLEDeviceServices=function(e){return Y("getBLEDeviceServices",e)},e.getBeacons=function(e={}){return Y("getBeacons",e)},e.getBluetoothAdapterState=function(e={}){return Y("getBluetoothAdapterState",e)},e.getBluetoothDevices=function(e={}){return te(e,async()=>{await X();const e=await F("getBluetoothDevices");for(const t of e.devices||[])re(t);return e})},e.getCanvas=async function(e,t){const{get:n}=Vt(e),r=await n(t);if(!r)return;if(Fn.has(r))return Fn.get(r);const i=qn(r),o=await r.invoke("bind",{refId:i});return o?(Fn.has(r)||Fn.set(r,new Un(r,i,o)),Fn.get(r)):void 0},e.getClipboardData=function(e={}){return Y("getClipboardData",e)},e.getConnectedBluetoothDevices=function(e){return Y("getConnectedBluetoothDevices",e)},e.getConnectedWifi=function(e={}){return Y("getConnectedWifi",e)},e.getContext=function(e={}){return Y("getContext",e)},e.getCurCorpGroupChat=function(e={}){return Y("getCurCorpGroupChat",e)},e.getCurCorpGroupContact=function(e){return Y("getCurCorpGroupContact",e)},e.getCurExternalChat=function(e={}){return Y("getCurExternalChat",e)},e.getCurExternalContact=function(e={}){return Y("getCurExternalContact",e)},e.getLocalFileData=function(e){return Y("getLocalFileData",e)},e.getLocalImgData=function(e){return Y("getLocalImgData",e)},e.getLocation=function(e={}){return te(e,async()=>{await X();const t=await F("geoLocation",{type:e.type||"wgs84"});return delete t.type,t})},e.getNetworkType=function(e={}){return Y("getNetworkType",e)},e.getNodeInfo=async function(e,t,n){const{get:r}=Vt(e),i=await r(t);if(i)return i.invoke("nodeInfo.get",{fields:n})},e.getShareInfo=function(e){return Y("getShareInfo",e)},e.getSignature=function(e){let t=e;"string"==typeof e&&(t={ticket:e});const n=t.nonceStr||Ne(),r=t.timestamp||Math.floor(Date.now()/1e3),i=t.url||o().split("#")[0];return{timestamp:r,nonceStr:n,signature:Jn(`jsapi_ticket=${t.ticket}&noncestr=${n}&timestamp=${r}&url=${i}`)}},e.getVerifyParams=k,e.getWifiList=function(e={}){return Y("getWifiList",e)},e.hideAllNonBaseMenuItem=function(e={}){return Y("hideAllNonBaseMenuItem",e)},e.hideChatAttachmentMenu=function(e){return Y("hideChatAttachmentMenu",e)},e.hideMenuItems=function(e){return Y("hideMenuItems",e)},e.hideOptionMenu=function(e={}){return Y("hideOptionMenu",e)},e.initOpenData=De,e.invoke=F,e.launchMiniprogram=function(e){return Y("launchMiniprogram",e,{appid:e.appid,path:ye(e.path),envVersion:e.envVersion})},e.navigateToAddCustomer=function(e={}){return Y("navigateToAddCustomer",e)},e.navigateToKfChat=function(e){return Y("navigateToKfChat",e)},e.notifyBLECharacteristicValueChange=function(e){return Y("notifyBLECharacteristicValueChange",e)},e.on=U,e.onBLECharacteristicValueChange=function(e){U("onBLECharacteristicValueChange",t=>{"string"==typeof t?.value&&(t.value=B(t.value)),e(t)})},e.onBLEConnectionStateChange=function(e){U("onBLEConnectionStateChange",e)},e.onBeaconServiceChange=function(e){U("onBeaconServiceChange",e)},e.onBeaconUpdate=function(e){U("onBeaconUpdate",e)},e.onBluetoothAdapterStateChange=function(e){U("onBluetoothAdapterStateChange",e)},e.onBluetoothDeviceFound=function(e){U("onBluetoothDeviceFound",t=>{for(const e of t.devices||[])re(e);e(t)})},e.onGetWifiList=function(e){U("onGetWifiList",e)},e.onHistoryBack=function(e){U("historyBack",e)},e.onLocationChange=function(e){U("auto:location:report",e)},e.onMenuShareAppMessage=function(e){ee("menu:share:appmessage",e,()=>F("sendAppMessage",{title:e.title||a(),desc:e.desc||"",link:e.link||o(),img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||"",finder_feed:e.finderFeed||e.finder_feed,finder_topic:e.finderTopic||e.finder_topic,finder_profile:e.finderProfile||e.finder_profile,enableIdTrans:e.enableIdTrans?1:0}))},e.onMenuShareQQ=function(e){ee("menu:share:qq",e,()=>F("shareQQ",{title:e.title||a(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||o()}))},e.onMenuShareQZone=function(e){ee("menu:share:QZone",e,()=>F("shareQZone",{title:e.title||a(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||o()}))},e.onMenuShareTimeline=function(e){ee("menu:share:timeline",e,()=>F("shareTimeline",{title:e.title||a(),desc:e.title||a(),img_url:e.imgUrl||"",link:e.link||o(),type:e.type||"link",data_url:e.dataUrl||"",enableIdTrans:e.enableIdTrans?1:0}))},e.onMenuShareWechat=function(e){ee("menu:share:wechat",e,()=>F("shareWechat",{title:e.title||a(),desc:e.desc||"",link:e.link||o(),img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||"",enableIdTrans:e.enableIdTrans?1:0}))},e.onMenuShareWeibo=function(e){ee("menu:share:weiboApp",e,()=>F("shareWeiboApp",{title:e.title||a(),desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||o()}))},e.onNetworkStatusChange=function(e){U("onNetworkStatusChange",e)},e.onSearchBeacons=function(e){U("onBeaconsInRange",e)},e.onUserCaptureScreen=function(e){U("onUserCaptureScreen",e)},e.onVoicePlayEnd=function(e){U("onVoicePlayEnd",e)},e.onVoiceRecordEnd=function(e){U("onVoiceRecordEnd",e)},e.onWifiConnected=function(e){U("onWifiConnected",e)},e.openAddress=function(e={}){return te(e,async()=>{await X();const e=await F("editAddress");return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e})},e.openAppComment=function(e={}){return Y("openAppComment",e)},e.openAppDeviceDataAuth=function(e={}){return Y("openAppDeviceDataAuth",e)},e.openAppManage=function(e={}){return Y("openAppManage",e)},e.openAppPurchase=function(e){return Y("openAppPurchase",e)},e.openBluetoothAdapter=function(e={}){return Y("openBluetoothAdapter",e)},e.openBusinessView=function(e){return te(e,async()=>{await X();const t=await F("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion});if(!d||!t.extraData)return t;try{t.extraData=JSON.parse(t.extraData)}catch(n){t.extraData={}}return t})},e.openCard=function(e){return Y("batchViewCard",e,{card_list:e.cardList.map(e=>({card_id:e.cardId,code:e.code}))})},e.openDefaultBrowser=function(e){return Y("openDefaultBrowser",e)},e.openDeviceProfile=function(e){return Y("openDeviceProfile",e)},e.openEnterpriseChat=function(e={}){return Y("openEnterpriseChat",e,{chatId:e.chatId||"",chatname:e.groupName||"",groupName:e.groupName||"",useridlist:j(e.userIds),userIds:j(e.userIds),openIds:j(e.openIds),externalUserIds:j(e.externalUserIds)})},e.openEnterpriseRedPacket=function(e){return Y("getRecevieBizHongBaoRequest",e,he(e))},e.openExistedChatWithMsg=function(e){return Y("openExistedChatWithMsg",e)},e.openLocation=function(e){return Y("openLocation",e,{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""})},e.openProductSpecificView=function(e){return Y("openProductViewWithPid",e,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo})},e.openThirdAppServiceChat=function(e={}){return Y("openThirdAppServiceChat",e)},e.openUserProfile=function(e){return Y("openUserProfile",e)},e.pauseVoice=function(e){return Y("pauseVoice",e)},e.playVoice=function(e){return Y("playVoice",e)},e.previewFile=function(e){return Y("previewFile",e)},e.previewImage=function(e){return Y("imagePreview",e)},e.printFile=function(e){return Y("printFile",e)},e.queryCurrHWOpenTalk=function(e={}){return Y("queryCurrHWOpenTalk",e)},e.readBLECharacteristicValue=function(e){return Y("readBLECharacteristicValue",e)},e.refundExternalPayment=function(e){return Y("refundExternalPayment",e)},e.register=function(e){!function(e){if(!e.corpId)throw new Error("Missing corpId");m=e}(e),(f||l)&&X()},e.replayLiving=function(e){return Y("replayLiving",e)},e.saveApprovalSelectedItems=function(e){return Y("saveApprovalSelectedItems",e,{key:e.key,selectedData:"string"==typeof e.selectedData?e.selectedData:JSON.stringify(e.selectedData)})},e.scanQRCode=function(e={}){return te(e,async()=>{await X();const t=await F("scanQRCode",{needResult:e.needResult?1:0,scanType:e.scanType||["qrCode","barCode"]});if(!h)return t;const n=t.resultStr;if(!n)return t;let r;try{r=JSON.parse(n)}catch(i){}return t.resultStr=r?.scan_code?.scan_result,t})},e.selectCorpGroupContact=function(e){return te(e,async()=>{await X();const t=await F("selectCorpGroupContact",e);if(!N(t.result))return t;try{t.result=JSON.parse(t.result)}catch(n){}return t})},e.selectEnterpriseContact=function(e){return te(e,async()=>{await X();const t=await F("selectEnterpriseContact",e);if(!N(t.result))return t;try{t.result=JSON.parse(t.result)}catch(n){}return t})},e.selectExternalChat=function(e={}){return Y("selectExternalChat",e)},e.selectExternalContact=function(e={}){return Y("selectExternalContact",e)},e.selectPrivilegedContact=function(e){return Y("selectPrivilegedContact",e)},e.sendChatMessage=function(e){return Y("sendChatMessage",e)},e.setClipboardData=function(e){return Y("setClipboardData",e)},e.setKeepScreenOn=function(e){return Y("setKeepScreenOn",e)},e.setShareAttr=function(e={}){return Y("setShareAttr",e)},e.shareAppMessage=function(e){return Y("shareAppMessage",e)},e.shareToExternalChat=function(e){return Y("shareToExternalChat",e)},e.shareToExternalContact=function(e){return Y("shareToExternalContact",e)},e.shareToExternalMoments=function(e){return Y("shareToExternalMoments",e)},e.shareWechatMessage=function(e){return Y("shareWechatMessage",e)},e.showAllNonBaseMenuItem=function(e={}){return Y("showAllNonBaseMenuItem",e)},e.showMenuItems=function(e){return Y("showMenuItems",e)},e.showOptionMenu=function(e={}){return Y("showOptionMenu",e)},e.showSecurityGatewayConfirmModal=function(e){const t=new URL("https://open.work.weixin.qq.com/wwopen/secureGateway/confirm");if(t.searchParams.set("confirm_id",e.confirmId),h||d)return void(location.href=t.href);t.searchParams.set("modal","true");const n=ze(t.href,t=>{switch(t.type){case"call":return $e(t,e);case"close":return;default:throw new Error(`Unknown message type '${t.type}'`)}});return{el:n.el,unmount(){n.dispose(),n.el.parentNode?.removeChild(n.el)}}},e.startAutoLBS=function(e){return Y("startAutoLBS",e)},e.startBeaconDiscovery=function(e){return Y("startBeaconDiscovery",e)},e.startBluetoothDevicesDiscovery=function(e={}){return Y("startBluetoothDevicesDiscovery",e)},e.startLiving=function(e={}){return Y("startLiving",e)},e.startMeeting=function(e={}){return Y("startMeeting",e)},e.startRecord=function(e={}){return Y("startRecord",e)},e.startSearchBeacons=function(e={}){return Y("startMonitoringBeacons",e)},e.startWecast=function(e={}){return Y("startWecast",e)},e.startWifi=function(e={}){return Y("startWifi",e)},e.stopAutoLBS=function(e={}){return Y("stopAutoLBS",e)},e.stopBeaconDiscovery=function(e={}){return Y("stopBeaconDiscovery",e)},e.stopBluetoothDevicesDiscovery=function(e={}){return Y("stopBluetoothDevicesDiscovery",e)},e.stopRecord=function(e={}){return Y("stopRecord",e)},e.stopSearchBeacons=function(e={}){return Y("stopMonitoringBeacons",e)},e.stopVoice=function(e){return Y("stopVoice",e)},e.stopWifi=function(e={}){return Y("stopWifi",e)},e.thirdPartyOpenPage=function(e){return Y("thirdPartyOpenPage",e)},e.translateVoice=function(e){return Y("translateVoice",e,{localId:e.localId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.updateAppMessageShareData=function(e={}){return Y("updateAppMessageShareData",e)},e.updateCorpGroupChat=function(e){return Y("updateCorpGroupChat",e)},e.updateEnterpriseChat=function(e){return Y("updateEnterpriseChat",e,{chatId:e.chatId,userIdsToAdd:j(e.userIdsToAdd)})},e.updateMomentsSetting=function(e){return Y("updateMomentsSetting",e)},e.updateTimelineShareData=function(e={}){return Y("updateTimelineShareData",e)},e.uploadImage=function(e){return Y("uploadImage",e,{localId:e.localId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.uploadVoice=function(e){return Y("uploadVoice",e,{localId:e.localId,isShowProgressTips:O(e.isShowProgressTips)?0:1})},e.wedocSelectDoc=function(e){return Y("wedocSelectDoc",e)},e.wedriveSelectDir=function(e={}){return Y("wedriveSelectDir",e)},e.wedriveSelectFile=function(e){return Y("wedriveSelectFile",e)},e.wedriveSelectFileForDownload=function(e){return Y("wedriveSelectFileForDownload",e)},e.wedriveSelectFileForShare=function(e){return Y("wedriveSelectFileForShare",e)},e.writeBLECharacteristicValue=function(e){return Y("writeBLECharacteristicValue",e,{deviceId:e.deviceId,serviceId:e.serviceId,characteristicId:e.characteristicId,value:W(e.value)})},e}({});
